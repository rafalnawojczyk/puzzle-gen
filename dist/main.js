!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.srVisualizer=e():t.srVisualizer=e()}(this,(function(){return(()=>{"use strict";var t={849:(t,e,s)=>{s.r(e),s.d(e,{renderCube:()=>C});const r={value:"#FFFF00"},o={value:"#FF0000"},i={value:"#0000FF"},n={value:"#FFFFFF"},a={value:"#FFA500"},h={value:"#00FF00"};var l,c="undefined"!=typeof Float32Array?Float32Array:Array;function u(){var t=new c(16);return c!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function d(t,e,s){var r,o,i,n,a,h,l,c,u,d,p,f,m=s[0],g=s[1],y=s[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],n=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],f=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=n,t[4]=a,t[5]=h,t[6]=l,t[7]=c,t[8]=u,t[9]=d,t[10]=p,t[11]=f,t[12]=r*m+a*g+u*y+e[12],t[13]=o*m+h*g+d*y+e[13],t[14]=i*m+l*g+p*y+e[14],t[15]=n*m+c*g+f*y+e[15]),t}function p(t,e,s){var r=s[0],o=s[1],i=s[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});class f{constructor(){this.matrix=u(),this.centroid=[0,0,0]}translate(t){d(this.matrix,this.matrix,t)}rotate(t,e){!function(t,e,s,r){var o,i,n,a,h,l,c,u,d,p,f,m,g,y,b,v,F,x,w,j,E,M,C,S,P=r[0],A=r[1],O=r[2],N=Math.hypot(P,A,O);N<1e-6||(P*=N=1/N,A*=N,O*=N,o=Math.sin(s),n=1-(i=Math.cos(s)),a=e[0],h=e[1],l=e[2],c=e[3],u=e[4],d=e[5],p=e[6],f=e[7],m=e[8],g=e[9],y=e[10],b=e[11],v=P*P*n+i,F=A*P*n+O*o,x=O*P*n-A*o,w=P*A*n-O*o,j=A*A*n+i,E=O*A*n+P*o,M=P*O*n+A*o,C=A*O*n-P*o,S=O*O*n+i,t[0]=a*v+u*F+m*x,t[1]=h*v+d*F+g*x,t[2]=l*v+p*F+y*x,t[3]=c*v+f*F+b*x,t[4]=a*w+u*j+m*E,t[5]=h*w+d*j+g*E,t[6]=l*w+p*j+y*E,t[7]=c*w+f*j+b*E,t[8]=a*M+u*C+m*S,t[9]=h*M+d*C+g*S,t[10]=l*M+p*C+y*S,t[11]=c*M+f*C+b*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this.matrix,this.matrix,t,e)}scale(t){p(this.matrix,this.matrix,t)}setColor(t){this.color=t}}class m extends f{constructor(t=[]){super(),this.setObjects(t)}setObjects(t){this.objects=t}addObject(t){this.objects.push(t)}setCentroid(t){this.centroid=t}}function g(t){var e=new c(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function y(t){let e=0,s=0,r=0;return t.forEach((t=>{e+=t[0],s+=t[1],r+=t[2]})),e/=t.length,s/=t.length,r/=t.length,g([e,s,r])}l=new c(3),c!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0);class b{constructor(t,e,s){this.indices=t,this.color=s,e&&this.calculateCentroid(e)}calculateCentroid(t){this.centroid=y(t.filter(((t,e)=>this.indices.includes(e))))}}class v extends f{constructor(t,e){super(),this.vertices=t,this.faces=e,this.centroid=y(this.vertices)}}function F(t,e,s){const r=t/2,o=t/e,i=o/2;let n=[];for(let a=0;a<e;a++){let h=-(-r+i+o*a);n=n.concat(x(t,e,s,h))}return n}function x(t,e,s,r=0){const o=t/2,i=t/e,n=i/2;let a=[];for(let t=0;t<e;t++){let e=-o+n+i*t,h=[[-n+e,n+r,0],[n+e,n+r,0],[n+e,-n+r,0],[-n+e,-n+r,0]],l=[new b([0,1,2,3],h,s)];a.push(new v(h,l))}return a}class w{constructor(t){this.size=t;const e=1.5,s=.75;this.U=new m(F(e,t,r)),this.R=new m(F(e,t,o)),this.F=new m(F(e,t,i)),this.D=new m(F(e,t,n)),this.L=new m(F(e,t,a)),this.B=new m(F(e,t,h)),this.U.rotate(-Math.PI/2,[0,1,0]),this.U.rotate(-Math.PI/2,[1,0,0]),this.U.translate([0,0,s]),this.R.translate([0,0,s]),this.F.rotate(-Math.PI/2,[0,1,0]),this.F.translate([0,0,s]),this.D.rotate(-Math.PI/2,[0,1,0]),this.D.rotate(Math.PI/2,[1,0,0]),this.D.translate([0,0,s]),this.L.rotate(-Math.PI,[0,1,0]),this.L.translate([0,0,s]),this.B.rotate(Math.PI/2,[0,1,0]),this.B.translate([0,0,s]),this.stickers=[this.U,this.R,this.F,this.D,this.L,this.B],this.group=new m(this.stickers),this.group.translate([0,0,-1]),this.group.rotate(.593411946,[1,0,0]),this.group.rotate(.785398,[0,1,0])}setFaceColors(t,e){t.objects.forEach(((t,s)=>{e&&e[s]&&(t.faces[0].color=e[s])}))}setColors(t){const e=this.size*this.size;let[s,r,o,i,n,a]=function(t,e){const s=Math.ceil(t.length/e);return new Array(s).fill(null).map(((s,r)=>t.slice(r*e,(r+1)*e)))}(t,e);this.setFaceColors(this.U,s),this.setFaceColors(this.R,r),this.setFaceColors(this.F,o),this.setFaceColors(this.D,i),this.setFaceColors(this.L,n),this.setFaceColors(this.B,a)}}class j{constructor(){this.matrix=u(),function(t,e,s,r,o){var i,n=1/Math.tan(e/2);t[0]=n/1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i=1/-999.9,t[10]=1000.1*i,t[14]=200*i}(this.matrix,Math.PI/2),d(this.matrix,this.matrix,[0,0,-5]),p(this.matrix,this.matrix,[4,4,1])}}class E{constructor(t,e,s,r,o,i){this.strokeWidth="0.035",this.polygons=[],this.domElement=document.createElement("div"),this.domElement.className="svg-renderer",this.svgElement=function(t,e,s,r,o,i){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttributeNS(null,"width",t.toString()),n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"viewBox",`${s} ${r} ${o} ${i}`),n.setAttributeNS(null,"id","sr-visualizer"),n}(t,e,s,r,o,i),this.domElement.appendChild(this.svgElement),console.log(this.svgElement)}render(t,e){this.polygons=[],function(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild)}(this.svgElement),t.objects.forEach((t=>{this.renderObject3D(t,e,[])})),this.renderPolygons()}renderPolygons(){this.polygons.sort(((t,e)=>t.centroid[2]-e.centroid[2])),this.polygons.forEach((t=>this.svgElement.appendChild(t.polygon)))}addPolygon(t){this.polygons.push(t)}renderObject3D(t,e,s){if(t instanceof v)this.renderGeometry(t,e,s);else if(t instanceof m){let r=t;this.sortObjects(r.objects,e,[r.matrix,...s]),r.objects.forEach((t=>{this.renderObject3D(t,e,[r.matrix,...s])}))}}renderGeometry(t,e,s){t.faces.forEach((r=>{let o=[];r.indices.map((e=>t.vertices[e])).forEach((r=>{let i=[t.matrix,...s,e.matrix],n=this.applyTransformations(r,i),a=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}(n,n,[1,-1,1]);o.push(a)}));const i=function(t,e,s){const r=document.createElementNS("http://www.w3.org/2000/svg","polygon"),o=function(t){return t.reduce(((t,e)=>`${t?t+" ":""}${e[0]}, ${e[1]}`),"")}(t),i=e?e.value:"black";return r.setAttributeNS(null,"points",o),r.setAttributeNS(null,"fill",i),s&&(r.setAttributeNS(null,"stroke","#000000"),r.setAttributeNS(null,"stroke-width",s)),r.setAttributeNS(null,"stroke-linejoin","round"),r}(o,r.color||t.color,this.strokeWidth);this.addPolygon({polygon:i,centroid:this.applyTransformations(r.centroid,[t.matrix,...s])})}))}sortFaces(t,e,s){t.sort(((t,r)=>{let o=[e.matrix,...s],i=[e.matrix,...s],n=this.applyTransformations(t.centroid,o),a=this.applyTransformations(r.centroid,i);return n[2]-a[2]}))}sortObjects(t,e,s){t.sort(((t,e)=>{let r=[t.matrix,...s],o=[e.matrix,...s],i=this.applyTransformations(t.centroid,r),n=this.applyTransformations(e.centroid,o);return i[2]-n[2]}))}applyTransformations(t,e){return e.reduce(((t,e)=>function(t,e,s){var r=e[0],o=e[1],i=e[2],n=s[3]*r+s[7]*o+s[11]*i+s[15];return n=n||1,t[0]=(s[0]*r+s[4]*o+s[8]*i+s[12])/n,t[1]=(s[1]*r+s[5]*o+s[9]*i+s[13])/n,t[2]=(s[2]*r+s[6]*o+s[10]*i+s[14])/n,t}(t,t,e)),g(t))}}class M{constructor(){this.objects=[]}add(t){this.objects.push(t)}}function C(){let t=new j,e=new M,s=new E(500,500,-.9,-.9,1.8,1.8);s.strokeWidth="0.02";let r=new w(5);e.add(r.group),s.strokeWidth="0.02",document.getElementById("idsomething").appendChild(s.domElement),s.render(e,t)}document.addEventListener("DOMContentLoaded",(function(t){console.log(1),C()}))}},e={};function s(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,s),o.exports}return s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(849)})()}));
//# sourceMappingURL=main.js.map