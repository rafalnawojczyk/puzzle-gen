!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.srVisualizer=e():t.srVisualizer=e()}(this,(function(){return(()=>{"use strict";var t={168:(t,e,s)=>{s.r(e),s.d(e,{Visualizer:()=>S,VisualizerType:()=>c,renderCube:()=>N});const r={value:"#FFFF00"},i={value:"#FF0000"},o={value:"#0000FF"},n={value:"#FFFFFF"},a={value:"#FFA500"},h={value:"#00FF00"};var l,c,u="undefined"!=typeof Float32Array?Float32Array:Array;function d(){var t=new u(16);return u!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function p(t,e,s){var r,i,o,n,a,h,l,c,u,d,p,m,f=s[0],y=s[1],g=s[2];return e===t?(t[12]=e[0]*f+e[4]*y+e[8]*g+e[12],t[13]=e[1]*f+e[5]*y+e[9]*g+e[13],t[14]=e[2]*f+e[6]*y+e[10]*g+e[14],t[15]=e[3]*f+e[7]*y+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],n=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=n,t[4]=a,t[5]=h,t[6]=l,t[7]=c,t[8]=u,t[9]=d,t[10]=p,t[11]=m,t[12]=r*f+a*y+u*g+e[12],t[13]=i*f+h*y+d*g+e[13],t[14]=o*f+l*y+p*g+e[14],t[15]=n*f+c*y+m*g+e[15]),t}function m(t,e,s){var r=s[0],i=s[1],o=s[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});class f{constructor(){this.matrix=d(),this.centroid=[0,0,0]}translate(t){p(this.matrix,this.matrix,t)}rotate(t,e){!function(t,e,s,r){var i,o,n,a,h,l,c,u,d,p,m,f,y,g,b,x,v,F,E,w,M,j,A,N,S=r[0],C=r[1],P=r[2],T=Math.hypot(S,C,P);T<1e-6||(S*=T=1/T,C*=T,P*=T,i=Math.sin(s),n=1-(o=Math.cos(s)),a=e[0],h=e[1],l=e[2],c=e[3],u=e[4],d=e[5],p=e[6],m=e[7],f=e[8],y=e[9],g=e[10],b=e[11],x=S*S*n+o,v=C*S*n+P*i,F=P*S*n-C*i,E=S*C*n-P*i,w=C*C*n+o,M=P*C*n+S*i,j=S*P*n+C*i,A=C*P*n-S*i,N=P*P*n+o,t[0]=a*x+u*v+f*F,t[1]=h*x+d*v+y*F,t[2]=l*x+p*v+g*F,t[3]=c*x+m*v+b*F,t[4]=a*E+u*w+f*M,t[5]=h*E+d*w+y*M,t[6]=l*E+p*w+g*M,t[7]=c*E+m*w+b*M,t[8]=a*j+u*A+f*N,t[9]=h*j+d*A+y*N,t[10]=l*j+p*A+g*N,t[11]=c*j+m*A+b*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this.matrix,this.matrix,t,e)}scale(t){m(this.matrix,this.matrix,t)}setColor(t){this.color=t}}class y extends f{constructor(t=[]){super(),this.setObjects(t)}setObjects(t){this.objects=t}addObject(t){this.objects.push(t)}setCentroid(t){this.centroid=t}}function g(t){var e=new u(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function b(t){let e=0,s=0,r=0;return t.forEach((t=>{e+=t[0],s+=t[1],r+=t[2]})),e/=t.length,s/=t.length,r/=t.length,g([e,s,r])}l=new u(3),u!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0);class x{constructor(t,e,s){this.indices=t,this.color=s,e&&this.calculateCentroid(e)}calculateCentroid(t){this.centroid=b(t.filter(((t,e)=>this.indices.includes(e))))}}class v extends f{constructor(t,e){super(),this.vertices=t,this.faces=e,this.centroid=b(this.vertices)}}function F(t,e,s){const r=t/2,i=t/e,o=i/2;let n=[];for(let a=0;a<e;a++){let h=-(-r+o+i*a);n=n.concat(E(t,e,s,h))}return n}function E(t,e,s,r=0){const i=t/2,o=t/e,n=o/2;let a=[];for(let t=0;t<e;t++){let e=-i+n+o*t,h=[[-n+e,n+r,0],[n+e,n+r,0],[n+e,-n+r,0],[-n+e,-n+r,0]],l=[new x([0,1,2,3],h,s)];a.push(new v(h,l))}return a}class w{constructor(t){this.size=t;const e=1.5,s=.75;this.U=new y(F(e,t,r)),this.R=new y(F(e,t,i)),this.F=new y(F(e,t,o)),this.D=new y(F(e,t,n)),this.L=new y(F(e,t,a)),this.B=new y(F(e,t,h)),this.U.rotate(-Math.PI/2,[0,1,0]),this.U.rotate(-Math.PI/2,[1,0,0]),this.U.translate([0,0,s]),this.R.translate([0,0,s]),this.F.rotate(-Math.PI/2,[0,1,0]),this.F.translate([0,0,s]),this.D.rotate(-Math.PI/2,[0,1,0]),this.D.rotate(Math.PI/2,[1,0,0]),this.D.translate([0,0,s]),this.L.rotate(-Math.PI,[0,1,0]),this.L.translate([0,0,s]),this.B.rotate(Math.PI/2,[0,1,0]),this.B.translate([0,0,s]),this.stickers=[this.U,this.R,this.F,this.D,this.L,this.B],this.group=new y(this.stickers),this.group.translate([0,0,-1]),this.group.rotate(.593411946,[1,0,0]),this.group.rotate(.785398,[0,1,0])}setFaceColors(t,e){t.objects.forEach(((t,s)=>{e&&e[s]&&(t.faces[0].color=e[s])}))}setColors(t){const e=this.size*this.size;let[s,r,i,o,n,a]=function(t,e){const s=Math.ceil(t.length/e);return new Array(s).fill(null).map(((s,r)=>t.slice(r*e,(r+1)*e)))}(t,e);this.setFaceColors(this.U,s),this.setFaceColors(this.R,r),this.setFaceColors(this.F,i),this.setFaceColors(this.D,o),this.setFaceColors(this.L,n),this.setFaceColors(this.B,a)}}class M{constructor(t,e,s,r,i,o){this.strokeWidth="0.035",this.polygons=[],this.domElement=document.createElement("div"),this.domElement.className="svg-renderer",this.svgElement=function(t,e,s,r,i,o){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttributeNS(null,"width",t.toString()),n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"viewBox",`${s} ${r} ${i} ${o}`),n.setAttributeNS(null,"id","sr-visualizer"),n}(t,e,s,r,i,o),this.domElement.appendChild(this.svgElement)}render(t,e){this.polygons=[],function(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild)}(this.svgElement),t.objects.forEach((t=>{this.renderObject3D(t,e,[])})),this.renderPolygons()}renderPolygons(){this.polygons.sort(((t,e)=>t.centroid[2]-e.centroid[2])),this.polygons.forEach((t=>this.svgElement.appendChild(t.polygon)))}addPolygon(t){this.polygons.push(t)}renderObject3D(t,e,s){if(t instanceof v)this.renderGeometry(t,e,s);else if(t instanceof y){let r=t;this.sortObjects(r.objects,e,[r.matrix,...s]),r.objects.forEach((t=>{this.renderObject3D(t,e,[r.matrix,...s])}))}}renderGeometry(t,e,s){t.faces.forEach((r=>{let i=[];r.indices.map((e=>t.vertices[e])).forEach((r=>{let o=[t.matrix,...s,e.matrix],n=this.applyTransformations(r,o),a=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}(n,n,[1,-1,1]);i.push(a)}));const o=function(t,e,s){const r=document.createElementNS("http://www.w3.org/2000/svg","polygon"),i=function(t){return t.reduce(((t,e)=>`${t?t+" ":""}${e[0]}, ${e[1]}`),"")}(t),o=e?e.value:"black";return r.setAttributeNS(null,"points",i),r.setAttributeNS(null,"fill",o),s&&(r.setAttributeNS(null,"stroke","#000000"),r.setAttributeNS(null,"stroke-width",s)),r.setAttributeNS(null,"stroke-linejoin","round"),r}(i,r.color||t.color,this.strokeWidth);this.addPolygon({polygon:o,centroid:this.applyTransformations(r.centroid,[t.matrix,...s])})}))}sortFaces(t,e,s){t.sort(((t,r)=>{let i=[e.matrix,...s],o=[e.matrix,...s],n=this.applyTransformations(t.centroid,i),a=this.applyTransformations(r.centroid,o);return n[2]-a[2]}))}sortObjects(t,e,s){t.sort(((t,e)=>{let r=[t.matrix,...s],i=[e.matrix,...s],o=this.applyTransformations(t.centroid,r),n=this.applyTransformations(e.centroid,i);return o[2]-n[2]}))}applyTransformations(t,e){return e.reduce(((t,e)=>function(t,e,s){var r=e[0],i=e[1],o=e[2],n=s[3]*r+s[7]*i+s[11]*o+s[15];return n=n||1,t[0]=(s[0]*r+s[4]*i+s[8]*o+s[12])/n,t[1]=(s[1]*r+s[5]*i+s[9]*o+s[13])/n,t[2]=(s[2]*r+s[6]*i+s[10]*o+s[14])/n,t}(t,t,e)),g(t))}}class j{constructor(){this.objects=[]}add(t){this.objects.push(t)}}class A{constructor(){this.matrix=d(),function(t,e,s,r,i){var o,n=1/Math.tan(e/2);t[0]=n/1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,o=1/-999.9,t[10]=1000.1*o,t[14]=200*o}(this.matrix,Math.PI/2),p(this.matrix,this.matrix,[0,0,-5]),m(this.matrix,this.matrix,[4,4,1])}}function N(t){let e=new A,s=new j,r=new M(500,500,-.9,-.9,1.8,1.8);r.strokeWidth="0.02";let i=new w(5);s.add(i.group),r.strokeWidth="0.02",document.getElementById(t).appendChild(r.domElement),r.render(s,e)}class S{constructor(t,e){}}!function(t){t.CUBE="cube",t.CUBE_NET="cube-net",t.MEGAMINX="megaminx",t.MEGAMINX_NET="megaminx-net",t.PYRAMINX="pyraminx",t.PYRAMINX_NET="pyraminx-net",t.SKEWB="skewb",t.SKEWB_NET="skewb-net",t.SQUARE1="square1",t.SQUARE1_NET="square1-net"}(c||(c={}))}},e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,s),i.exports}return s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(168)})()}));
//# sourceMappingURL=main.js.map