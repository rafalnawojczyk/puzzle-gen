!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.puzzleGen=s():t.puzzleGen=s()}(this,(function(){return(()=>{"use strict";var t={195:(t,s,e)=>{var i,r,h;e.r(s),e.d(s,{Algorithm:()=>Ps,Masks:()=>Rs,PuzzleGeometry:()=>Ts,Rendering:()=>Ls,SVG:()=>Ms,Simulator:()=>Bs,Type:()=>bs,Visualizer:()=>ys}),function(t){t[t.Clockwise=0]="Clockwise",t[t.CounterClockwise=1]="CounterClockwise",t[t.Double=2]="Double"}(i||(i={})),function(t){t.Clockwise="",t.CounterClockwise="'",t.Double="2"}(r||(r={})),function(t){t.F="F",t.U="U",t.R="R",t.L="L",t.D="D",t.B="B",t.M="M",t.E="E",t.S="S",t.X="x",t.Y="y",t.Z="z"}(h||(h={}));const o=[h.F,h.U,h.R,h.L,h.D,h.B,h.M,h.E,h.S,h.X,h.Y,h.Z],a=[h.X,h.Y,h.Z],n=/([2-9]+)?([UuFfRrDdLlBbMESxyz])(w)?([2\'])?/g;function c(t){if(!t)return[];let s,e=[];for(;s=n.exec(t);){let t=s[1],i=s[2],h=s[3],o=s[4]||r.Clockwise,n=i===i.toLowerCase()&&-1===a.indexOf(i);n&&(i=i.toUpperCase());let c={unit:u(i),turnType:d(o),slices:n?2:l(t,h)};e.push(c)}return e}function l(t,s){if(s&&!t)return 2;if(!s&&t)throw new Error("Invalid move: Cannot specify num slices if outer block move indicator 'w' is not present");return s||t?parseInt(t):1}function u(t){if(o.indexOf(t)<0)throw new Error(`Invalid move (${t}): Possible turn faces are [U R F L D B M E S x y z]`);return t}function d(t){switch(t){case r.Clockwise:return i.Clockwise;case r.CounterClockwise:return i.CounterClockwise;case r.Double:return i.Double;default:throw new Error(`Invalid move modifier (${t})`)}}class f{constructor(){this.stickers=new Map,this.faces=new Map,this.turns=new Map}addFace(t,s){if(s&&this.faces.has(s))throw`Face ${s} already exists`;s||(s=(this.faces.size+1).toString());const e=t.reduce(((t,s)=>{const e=(this.stickers.size+1).toString();return this.stickers.set(e,s),t.push(e),t}),[]);return this.faces.set(s,e),{faceId:s,stickerIds:e}}addTurn(t,s){if(s&&this.turns.has(s))throw`Turn ${s} already exists`;return s||(s=(this.turns.size+1).toString()),this.turns.set(s,t),s}doTurn(t,s=!1){const e=this.turns.get(t);if(!e)throw`Unknown turn ${t}`;let i=s?1:0,r=s?0:1,h={};e.forEach((t=>{h[t[r]]=this.stickers.get(t[r]),this.stickers.set(t[r],h[t[i]]||this.stickers.get(t[i]))}))}isSolved(){const t=this.faces.entries();let s=t.next();do{const e=s.value[1];let i=this.stickers.get(e[0]);for(let t of e)if(i!=this.stickers.get(t))return!1;s=t.next()}while(!s.done);return!0}getValues(){let t={};return this.faces.forEach(((s,e)=>{t[e]=s.map((t=>this.stickers.get(t)))})),t}setValue(t,s,e){if(!this.faces.has(t))return void console.warn(`attempting to set sticker value on invalid face: ${t}`);let i=this.faces.get(t),r=i[s];i?(console.log(r,e),this.stickers.set(r,e)):console.warn(`attempting to set sticker value for invalid sticker: ${t} ${s}`)}alg(t){t&&t.split(" ").forEach((t=>this.doTurn(t)))}case(t){}}const p={value:"#FFFF00"},b={value:"#FF0000"},w={value:"#0000FF"},g={value:"#FFFFFF"},C={value:"#FFA500"},k={value:"#00FF00"},F={value:"#800080"},m={value:"#808080"},E={value:"#00008B"},y={value:"#ffffb3"},S={value:"#32CD32"},M={value:"#FF69B4"},R={value:"#000000"},L={value:"#404040"};var T;!function(t){t[t.CORNER=0]="CORNER",t[t.EDGE=1]="EDGE",t[t.MIDDLE=2]="MIDDLE"}(T||(T={}));const B=[.96875,-.24803,0],P=p,I=g,U=b,v=w,x=k,D=C,z=[{type:T.CORNER,colors:[P,U,v]},{type:T.EDGE,colors:[P,v]},{type:T.CORNER,colors:[P,v,D]},{type:T.EDGE,colors:[P,D]},{type:T.CORNER,colors:[P,D,x]},{type:T.EDGE,colors:[P,x]},{type:T.CORNER,colors:[P,x,U]},{type:T.EDGE,colors:[P,U]}],N=[{type:T.EDGE,colors:[I,D]},{type:T.CORNER,colors:[I,D,v]},{type:T.EDGE,colors:[I,v]},{type:T.CORNER,colors:[I,v,U]},{type:T.EDGE,colors:[I,U]},{type:T.CORNER,colors:[I,U,x]},{type:T.EDGE,colors:[I,x]},{type:T.CORNER,colors:[I,x,D]}],A=/(\/|\((-?\d),(-?\d)\))/g;function j(t){let s,e=[];for(;s=A.exec(t);)"/"===s[0]?e.push({slice:!0}):e.push({top:parseInt(s[2]),bottom:parseInt(s[3])});return e}const W={[T.CORNER]:2,[T.EDGE]:1};class O extends f{constructor(){super(),this.topLayer=JSON.parse(JSON.stringify(z)),this.bottomLayer=JSON.parse(JSON.stringify(N)),this.middleRotated=!1}alg(t){j(t).forEach((t=>{"slice"in t?this.slice():(this.rotateTop(t.top),this.rotateBottom(t.bottom))}))}case(t){j(t).reverse().forEach((t=>{"slice"in t?this.slice():(this.rotateTop(-1*t.top),this.rotateBottom(-1*t.bottom))}))}slice(){let t=0,s=0;for(let s=this.topLayer.length,e=0;s>0&&e<6;s--)e+=W[this.topLayer[s-1].type],t++;for(let t=this.bottomLayer.length,e=0;t>0&&e<6;t--)e+=W[this.bottomLayer[t-1].type],s++;const e=this.topLayer.splice(this.topLayer.length-t,this.topLayer.length),i=this.bottomLayer.splice(this.bottomLayer.length-s,this.bottomLayer.length);this.topLayer=this.topLayer.concat(i),this.bottomLayer=this.bottomLayer.concat(e),this.middleRotated=!this.middleRotated}rotateTop(t){for(;0!=t;)if(t<0){const s=this.topLayer.shift(),e=W[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.topLayer.push(s),t+=e}else{const s=this.topLayer.pop(),e=W[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.topLayer.unshift(s),t-=e}}rotateBottom(t){for(;0!=t;)if(t<0){const s=this.bottomLayer.shift(),e=W[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.bottomLayer.push(s),t+=e}else{const s=this.bottomLayer.pop(),e=W[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.bottomLayer.unshift(s),t-=e}}}const $=/([LRUB])(\'?)/g,q={"":i.Clockwise,"'":i.CounterClockwise};function G(t){let s,e=[];for(;s=$.exec(t);){const t=s[1],i=s[2];e.push({unit:t,turnType:q[i],slices:1})}return e}function _(t,s){return new Array(t).fill(s)}class H extends f{constructor(){super();const{stickerIds:t}=this.addFace(_(5,"top"),"top"),{stickerIds:s}=this.addFace(_(5,"front"),"front"),{stickerIds:e}=this.addFace(_(5,"right"),"right"),{stickerIds:i}=this.addFace(_(5,"bottom"),"bottom"),{stickerIds:r}=this.addFace(_(5,"back"),"back"),{stickerIds:h}=this.addFace(_(5,"left"),"left");this.addTurn([[e[0],r[0]],[e[2],r[4]],[e[3],r[1]],[e[4],r[3]],[r[0],i[0]],[r[4],i[2]],[r[1],i[3]],[r[3],i[4]],[i[0],e[0]],[i[2],e[2]],[i[3],e[3]],[i[4],e[4]],[s[4],t[2]],[t[2],h[3]],[h[3],s[4]]],"R"),this.addTurn([[X(t),X(h)],[Y(t),Y(h)],[Z(t),Z(h)],[Q(t),Q(h)],[X(h),X(r)],[Y(h),Z(r)],[Z(h),V(r)],[Q(h),Y(r)],[X(r),X(t)],[Z(r),Y(t)],[V(r),Z(t)],[Y(r),Q(t)],[Z(e),Y(s)],[Y(s),Q(i)],[Q(i),Z(e)]],"U"),this.addTurn([[X(h),X(s)],[Q(h),Y(s)],[Z(h),V(s)],[V(h),Q(s)],[X(s),X(i)],[Y(s),Z(i)],[V(s),Q(i)],[Q(s),Y(i)],[X(i),X(h)],[Z(i),Q(h)],[Q(i),Z(h)],[Y(i),V(h)],[V(r),Q(t)],[Q(t),Q(e)],[Q(e),V(r)]],"L"),this.addTurn([[X(r),X(h)],[Z(r),V(h)],[Q(r),Y(h)],[V(r),Q(h)],[X(h),X(i)],[V(h),V(i)],[Y(h),Y(i)],[Q(h),Q(i)],[X(i),X(r)],[V(i),Z(r)],[Y(i),Q(r)],[Q(i),V(r)],[Y(t),Q(s)],[Q(s),V(e)],[V(e),Y(t)]],"B")}R(t){this.doTurn("R",t)}U(t){this.doTurn("U",t)}L(t){this.doTurn("L",t)}B(t){this.doTurn("B",t)}alg(t){t&&this.doTurns(G(t))}case(t){if(!t)return;let s=G(t).reverse().map((t=>Object.assign(Object.assign({},t),{turnType:t.turnType===i.Clockwise?i.CounterClockwise:i.Clockwise})));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s=t.turnType===i.CounterClockwise;switch(t.unit){case"R":this.R(s);break;case"U":this.U(s);break;case"L":this.L(s);break;case"B":this.B(s)}}))}}const X=t=>t[0],Y=t=>t[1],Z=t=>t[2],Q=t=>t[3],V=t=>t[4],K=/([LlRrUuBb])(\'?)/g,J={"":i.Clockwise,"'":i.CounterClockwise};function tt(t){let s,e=[];for(;s=K.exec(t);){const t=s[1],i=s[2];e.push({unit:t,turnType:J[i],slices:1})}return e}class st extends f{constructor(){super();const{stickerIds:t}=this.addFace(_(9,"top"),"top"),{stickerIds:s}=this.addFace(_(9,"left"),"left"),{stickerIds:e}=this.addFace(_(9,"right"),"right"),{stickerIds:i}=this.addFace(_(9,"back"),"back");this.addTurn([[t[8],e[8]],[e[8],s[8]],[s[8],t[8]]],"u"),this.addTurn([[s[0],i[8]],[i[8],t[4]],[t[4],s[0]]],"l"),this.addTurn([[s[4],e[0]],[e[0],i[4]],[i[4],s[4]]],"r"),this.addTurn([[e[4],t[0]],[t[0],i[0]],[i[0],e[4]]],"b"),this.addTurn([[t[5],e[5]],[t[6],e[6]],[t[7],e[7]],[t[8],e[8]],[e[5],s[5]],[e[6],s[6]],[e[7],s[7]],[e[8],s[8]],[s[5],t[5]],[s[6],t[6]],[s[7],t[7]],[s[8],t[8]]],"U"),this.addTurn([[s[0],i[8]],[s[1],i[6]],[s[2],i[5]],[s[5],i[7]],[i[8],t[4]],[i[6],t[3]],[i[5],t[7]],[i[7],t[2]],[t[4],s[0]],[t[3],s[1]],[t[7],s[2]],[t[2],s[5]]],"L"),this.addTurn([[s[2],e[5]],[s[3],e[1]],[s[4],e[0]],[s[7],e[2]],[e[5],i[2]],[e[1],i[3]],[e[0],i[4]],[e[2],i[7]],[i[2],s[2]],[i[3],s[3]],[i[4],s[4]],[i[7],s[7]]],"R"),this.addTurn([[e[2],t[5]],[e[3],t[1]],[e[4],t[0]],[e[7],t[2]],[t[5],i[5]],[t[1],i[1]],[t[0],i[0]],[t[2],i[2]],[i[5],e[2]],[i[1],e[3]],[i[0],e[4]],[i[2],e[7]]],"B")}U(t){this.doTurn("U",t)}R(t){this.doTurn("R",t)}L(t){this.doTurn("L",t)}B(t){this.doTurn("B",t)}u(t){this.doTurn("u",t)}r(t){this.doTurn("r",t)}l(t){this.doTurn("l",t)}b(t){this.doTurn("b",t)}alg(t){t&&this.doTurns(tt(t))}case(t){if(!t)return;let s=tt(t).reverse().map((t=>Object.assign(Object.assign({},t),{turnType:t.turnType===i.Clockwise?i.CounterClockwise:i.Clockwise})));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s=t.turnType===i.CounterClockwise;switch(t.unit){case"R":this.R(s);break;case"r":this.r(s);break;case"U":this.U(s);break;case"u":this.u(s);break;case"L":this.L(s);break;case"l":this.l(s);break;case"B":this.B(s);break;case"b":this.b(s)}}))}}const et=["U","R","F","dr","dl","L","d","br","BR","BL","bl","b"],it=/([RD])(\+\+|\-\-)|(U)(\'?)/g;var rt;!function(t){t.Clockwise="++",t.CounterClockwise="--",t.UClockwise="",t.UCounter="'"}(rt||(rt={}));const ht={[rt.Clockwise]:i.Clockwise,[rt.CounterClockwise]:i.CounterClockwise,[rt.UClockwise]:i.Clockwise,[rt.UCounter]:i.CounterClockwise};function ot(t){if(!t)return[];let s,e=[];for(;s=it.exec(t);){const t=s[1]||s[3],i=s[2]||s[4];e.push({unit:t,turnType:ht[i],slices:1})}return e}class at extends f{constructor(){super(),et.forEach((t=>{this.addFace(_(11,t),t)}));const t=this.faces.get("U"),s=this.faces.get("R"),e=this.faces.get("F"),i=this.faces.get("dr"),r=this.faces.get("dl"),h=this.faces.get("L"),o=this.faces.get("d"),a=this.faces.get("br"),n=this.faces.get("BR"),c=this.faces.get("BL"),l=this.faces.get("bl"),u=this.faces.get("b");this.addTurn([[e[2],t[6]],[e[1],t[5]],[e[10],t[4]],[t[6],n[10]],[t[5],n[9]],[t[4],n[8]],[n[10],a[8]],[n[9],a[7]],[n[8],a[6]],[a[8],i[2]],[a[7],i[1]],[a[6],i[10]],[i[2],e[2]],[i[1],e[1]],[i[10],e[10]],...nt(s)],"R"),this.addTurn([[t[2],s[2]],[t[3],s[3]],[t[4],s[4]],[s[2],i[2]],[s[3],i[3]],[s[4],i[4]],[i[2],r[2]],[i[3],r[3]],[i[4],r[4]],[r[2],h[2]],[r[3],h[3]],[r[4],h[4]],[h[2],t[2]],[h[3],t[3]],[h[4],t[4]],...nt(e)],"F"),this.addTurn([[e[2],h[4]],[e[3],h[5]],[e[4],h[6]],[h[4],c[8]],[h[5],c[9]],[h[6],c[10]],[c[8],n[6]],[c[9],n[7]],[c[10],n[8]],[n[6],s[10]],[n[7],s[1]],[n[8],s[2]],[s[10],e[2]],[s[1],e[3]],[s[2],e[4]],...nt(t)],"U"),this.addTurn([[e[4],r[4]],[e[5],r[5]],[e[6],r[6]],[r[4],l[8]],[r[5],l[9]],[r[6],l[10]],[l[8],c[6]],[l[9],c[7]],[l[10],c[8]],[c[6],t[10]],[c[7],t[1]],[c[8],t[2]],[t[10],e[4]],[t[1],e[5]],[t[2],e[6]],...nt(h)],"L"),this.addTurn([[t[6],c[10]],[t[7],c[1]],[t[8],c[2]],[c[10],u[8]],[c[1],u[9]],[c[2],u[10]],[u[8],a[4]],[u[9],a[5]],[u[10],a[6]],[a[4],s[8]],[a[5],s[9]],[a[6],s[10]],[s[8],t[6]],[s[9],t[7]],[s[10],t[8]],...nt(n)],"BR"),this.addTurn([[t[8],h[6]],[t[9],h[7]],[t[10],h[8]],[h[6],l[10]],[h[7],l[1]],[h[8],l[2]],[l[10],u[6]],[l[1],u[7]],[l[2],u[8]],[u[6],n[4]],[u[7],n[5]],[u[8],n[6]],[n[4],t[8]],[n[5],t[9]],[n[6],t[10]],...nt(c)],"BL"),this.addTurn([[e[8],s[4]],[e[9],s[5]],[e[10],s[6]],[s[4],a[8]],[s[5],a[9]],[s[6],a[10]],[a[8],o[6]],[a[9],o[7]],[a[10],o[8]],[o[6],r[10]],[o[7],r[1]],[o[8],r[2]],[r[10],e[8]],[r[1],e[9]],[r[2],e[10]],...nt(i)],"dr"),this.addTurn([[e[6],i[4]],[e[7],i[5]],[e[8],i[6]],[i[4],o[8]],[i[5],o[9]],[i[6],o[10]],[o[8],l[6]],[o[9],l[7]],[o[10],l[8]],[l[6],h[10]],[l[7],h[1]],[l[8],h[2]],[h[10],e[6]],[h[1],e[7]],[h[2],e[8]],...nt(r)],"dl"),this.addTurn([[a[10],u[2]],[a[1],u[3]],[a[2],u[4]],[u[2],l[4]],[u[3],l[5]],[u[4],l[6]],[l[4],r[8]],[l[5],r[9]],[l[6],r[10]],[r[8],i[6]],[r[9],i[7]],[r[10],i[8]],[i[6],a[10]],[i[7],a[1]],[i[8],a[2]],...nt(o)],"d"),this.addTurn([[u[10],o[4]],[u[1],o[5]],[u[2],o[6]],[o[4],i[8]],[o[5],i[9]],[o[6],i[10]],[i[8],s[6]],[i[9],s[7]],[i[10],s[8]],[s[6],n[10]],[s[7],n[1]],[s[8],n[2]],[n[10],u[10]],[n[1],u[1]],[n[2],u[2]],...nt(a)],"br"),this.addTurn([[c[4],h[8]],[c[5],h[9]],[c[6],h[10]],[h[8],r[6]],[h[9],r[7]],[h[10],r[8]],[r[6],o[10]],[r[7],o[1]],[r[8],o[2]],[o[10],u[4]],[o[1],u[5]],[o[2],u[6]],[u[4],c[4]],[u[5],c[5]],[u[6],c[6]],...nt(l)],"bl"),this.addTurn([[a[2],n[2]],[a[3],n[3]],[a[4],n[4]],[n[2],c[2]],[n[3],c[3]],[n[4],c[4]],[c[2],l[2]],[c[3],l[3]],[c[4],l[4]],[l[2],o[2]],[l[3],o[3]],[l[4],o[4]],[o[2],a[2]],[o[3],a[3]],[o[4],a[4]],...nt(u)],"b"),this.addTurn([[e[0],s[0]],[e[1],s[9]],[e[5],s[3]],[e[6],s[4]],[e[7],s[5]],[e[8],s[6]],[e[9],s[7]],[e[10],s[8]],[s[0],n[0]],[s[3],n[9]],[s[4],n[10]],[s[5],n[1]],[s[6],n[2]],[s[7],n[3]],[s[8],n[4]],[s[9],n[5]],[n[0],c[0]],[n[9],c[1]],[n[10],c[2]],[n[1],c[3]],[n[2],c[4]],[n[3],c[5]],[n[4],c[6]],[n[5],c[7]],[c[0],h[0]],[c[1],h[7]],[c[2],h[8]],[c[3],h[9]],[c[4],h[10]],[c[5],h[1]],[c[6],h[2]],[c[7],h[3]],[h[0],e[0]],[h[7],e[5]],[h[8],e[6]],[h[9],e[7]],[h[10],e[8]],[h[1],e[9]],[h[2],e[10]],[h[3],e[1]],[i[0],a[0]],[i[1],a[5]],[i[2],a[6]],[i[3],a[7]],[i[4],a[8]],[i[5],a[9]],[i[6],a[10]],[i[7],a[1]],[i[8],a[2]],[i[9],a[3]],[i[10],a[4]],[a[0],u[0]],[a[1],u[3]],[a[2],u[4]],[a[3],u[5]],[a[4],u[6]],[a[5],u[7]],[a[6],u[8]],[a[7],u[9]],[a[8],u[10]],[a[9],u[1]],[a[10],u[2]],[u[0],l[0]],[u[1],l[3]],[u[2],l[4]],[u[3],l[5]],[u[4],l[6]],[u[5],l[7]],[u[6],l[8]],[u[7],l[9]],[u[8],l[10]],[u[9],l[1]],[u[10],l[2]],[l[0],r[0]],[l[1],r[5]],[l[2],r[6]],[l[3],r[7]],[l[4],r[8]],[l[5],r[9]],[l[6],r[10]],[l[7],r[1]],[l[8],r[2]],[l[9],r[3]],[l[10],r[4]],[r[0],i[0]],[r[1],i[9]],[r[2],i[10]],[r[3],i[1]],[r[4],i[2]],[r[5],i[3]],[r[6],i[4]],[r[7],i[5]],[r[8],i[6]],[r[9],i[7]],[r[10],i[8]],...nt(o)],"D++"),this.addTurn([[e[0],t[0]],[e[7],t[3]],[e[8],t[4]],[e[9],t[5]],[e[10],t[6]],[e[1],t[7]],[e[2],t[8]],[e[3],t[9]],[t[0],c[0]],[t[3],c[9]],[t[4],c[10]],[t[5],c[1]],[t[6],c[2]],[t[7],c[3]],[t[8],c[4]],[t[9],c[5]],[c[0],l[0]],[c[9],l[1]],[c[10],l[2]],[c[1],l[3]],[c[2],l[4]],[c[3],l[5]],[c[4],l[6]],[c[5],l[7]],[l[0],r[0]],[l[1],r[7]],[l[2],r[8]],[l[3],r[9]],[l[4],r[10]],[l[5],r[1]],[l[6],r[2]],[l[7],r[3]],[r[0],e[0]],[r[7],e[7]],[r[8],e[8]],[r[9],e[9]],[r[10],e[10]],[r[1],e[1]],[r[2],e[2]],[r[3],e[3]],[i[0],s[0]],[i[1],s[9]],[i[2],s[10]],[i[3],s[1]],[i[4],s[2]],[i[5],s[3]],[i[6],s[4]],[i[7],s[5]],[i[8],s[6]],[i[9],s[7]],[i[10],s[8]],[s[0],n[0]],[s[1],n[5]],[s[2],n[6]],[s[3],n[7]],[s[4],n[8]],[s[5],n[9]],[s[6],n[10]],[s[7],n[1]],[s[8],n[2]],[s[9],n[3]],[s[10],n[4]],[n[0],u[0]],[n[1],u[1]],[n[2],u[2]],[n[3],u[3]],[n[4],u[4]],[n[5],u[5]],[n[6],u[6]],[n[7],u[7]],[n[8],u[8]],[n[9],u[9]],[n[10],u[10]],[u[0],o[0]],[u[1],o[5]],[u[2],o[6]],[u[3],o[7]],[u[4],o[8]],[u[5],o[9]],[u[6],o[10]],[u[7],o[1]],[u[8],o[2]],[u[9],o[3]],[u[10],o[4]],[o[0],i[0]],[o[1],i[5]],[o[2],i[6]],[o[3],i[7]],[o[4],i[8]],[o[5],i[9]],[o[6],i[10]],[o[7],i[1]],[o[8],i[2]],[o[9],i[3]],[o[10],i[4]],...nt(a)],"R++")}U(t){this.doTurn("U",t)}R(t){this.doTurn("R",t)}F(t){this.doTurn("F",t)}dr(t){this.doTurn("dr",t)}dl(t){this.doTurn("dl",t)}L(t){this.doTurn("L",t)}d(t){this.doTurn("d",t)}br(t){this.doTurn("br",t)}BR(t){this.doTurn("BR",t)}BL(t){this.doTurn("BL",t)}bl(t){this.doTurn("bl",t)}b(t){this.doTurn("b",t)}Dxx(t){this.doTurn("D++",t)}Rxx(t){this.doTurn("R++",t)}alg(t){t&&this.doTurns(ot(t))}case(t){if(!t)return;let s=ot(t).reverse().map((t=>Object.assign(Object.assign({},t),{turnType:t.turnType===i.Clockwise?i.CounterClockwise:i.Clockwise})));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s=t.turnType===i.CounterClockwise;switch(t.unit){case"R":this.Rxx(s);break;case"D":this.Dxx(s);break;case"U":this.U(s)}}))}}function nt(t){return[[t[1],t[9]],[t[9],t[7]],[t[7],t[5]],[t[5],t[3]],[t[3],t[1]],[t[2],t[10]],[t[10],t[8]],[t[8],t[6]],[t[6],t[4]],[t[4],t[2]]]}var ct;!function(t){t.U="U",t.R="R",t.F="F",t.D="D",t.L="L",t.B="B"}(ct||(ct={}));const lt=[ct.U,ct.R,ct.F,ct.D,ct.L,ct.B];var ut;!function(t){t.X="X",t.Y="Y",t.Z="Z"}(ut||(ut={}));const dt={X:[ct.U,ct.B,ct.D,ct.F],Y:[ct.L,ct.B,ct.R,ct.F],Z:[ct.L,ct.U,ct.R,ct.D]},ft={X:{[ct.U]:0,[ct.B]:2,[ct.F]:0,[ct.D]:0},Y:{[ct.B]:-1,[ct.F]:-1,[ct.L]:-1,[ct.R]:-1},Z:{[ct.U]:-1,[ct.D]:1,[ct.L]:2,[ct.R]:0}},pt={[ct.U]:!1,[ct.R]:!1,[ct.F]:!1,[ct.D]:!0,[ct.L]:!0,[ct.B]:!0};var bt="undefined"!=typeof Float32Array?Float32Array:Array;function wt(){var t=new bt(3);return bt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function gt(t){var s=new bt(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}function Ct(t,s,e,i){var r=[],h=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],h[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),h[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),h[2]=r[2],t[0]=h[0]+e[0],t[1]=h[1]+e[1],t[2]=h[2]+e[2],t}function kt(t){return Math.PI*t/180}function Ft(t,s){return[t*Math.cos(s),t*Math.sin(s)]}function mt(t){let s=0,e=0,i=0;return t.forEach((t=>{s+=t[0],e+=t[1],i+=t[2]})),s/=t.length,e/=t.length,i/=t.length,gt([s,e,i])}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),wt();class Et extends f{constructor(t){super(),this.size=t,this.gridSize=t*t,lt.forEach((t=>{this.addFace(_(this.gridSize,t),t);const s=this.makeFaceTurnDefinitions(t);this.addTurn(s,t)})),[ut.X,ut.Y,ut.Z].forEach((t=>{for(let s=0;s<this.size;s++){let e=[];dt[t].forEach(((i,r)=>{const h=dt[t][(r+1)%dt[t].length],o=this.faces.get(h),a=this.faces.get(i);for(let r=0;r<this.size;r++){const n=this.size*r+s,c=a[this.axisAlignedSticker(t,i,n)],l=o[this.axisAlignedSticker(t,h,n)];e.push([c,l])}})),this.addTurn(e,`${t}-${s}`)}}))}makeFaceTurnDefinitions(t){const s=this.faces.get(t);return s.map(((t,e)=>[t,s[this.clockwiseSticker(e)]]))}clockwiseSticker(t){return(t+1)*this.size%(this.gridSize+1)-1}counterClockwiseSticker(t){return this.oppositeSticker(this.clockwiseSticker(t))}oppositeSticker(t){return this.gridSize-(t+1)}axisAlignedSticker(t,s,e){switch(ft[t][s]){case 0:return e;case 1:return this.clockwiseSticker(e);case 2:return this.oppositeSticker(e);case-1:return this.counterClockwiseSticker(e);default:throw`Invalid axis face orientation value ${ft[t][s]}`}}turnFace(t,s,e,i,r){Math.abs(r-i)>=this.size-1?console.error(`Invalid number of layers to turn, skipping turn.; face=${t}, layers=${Math.abs(r-i)+1}`):(this.doTurn(t,e),function(t,s){if(t===s)return[t];const e=t<s?1:-1;let i=[];for(let r=t;r!=s;r+=e)i.push(r);return i.push(s),i}(i,r).forEach((i=>{this.doTurn(`${s}-${i}`,pt[t]?!e:e)})))}U(t=!1,s=1){this.turnFace(ct.U,ut.Y,t,this.size-1,this.size-s)}R(t=!1,s=1){this.turnFace(ct.R,ut.X,t,this.size-1,this.size-s)}F(t=!1,s=1){this.turnFace(ct.F,ut.Z,t,0,s-1)}D(t=!1,s=1){this.turnFace(ct.D,ut.Y,t,0,s-1)}L(t=!1,s=1){this.turnFace(ct.L,ut.X,t,0,s-1)}B(t=!1,s=1){this.turnFace(ct.B,ut.Z,t,this.size-1,this.size-s)}M(t=!1){for(let s=1;s<this.size-1;s++)this.doTurn(`${ut.X}-${s}`,!t)}S(t=!1){for(let s=1;s<this.size-1;s++)this.doTurn(`${ut.Z}-${s}`,t)}E(t=!1){for(let s=1;s<this.size-1;s++)this.doTurn(`${ut.Y}-${s}`,!t)}X(t=!1){this.doTurn("R",t),this.doTurn("L",!t);for(let s=0;s<this.size;s++)this.doTurn(`${ut.X}-${s}`,t)}Y(t=!1){this.doTurn("U",t),this.doTurn("D",!t);for(let s=0;s<this.size;s++)this.doTurn(`${ut.Y}-${s}`,t)}Z(t=!1){this.doTurn("F",t),this.doTurn("B",!t);for(let s=0;s<this.size;s++)this.doTurn(`${ut.Z}-${s}`,t)}reset(){this.faces.forEach(((t,s)=>{t.forEach((t=>{this.stickers.set(t,s)}))}))}alg(t){t&&this.doTurns(c(t))}case(t){if(!t)return;let s=c(t).reverse().map((t=>{switch(t.turnType){case i.Clockwise:t.turnType=i.CounterClockwise;break;case i.CounterClockwise:t.turnType=i.Clockwise;break;case i.Double:}return t}));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s;switch(t.unit){case h.U:s=this.U.bind(this);break;case h.R:s=this.R.bind(this);break;case h.F:s=this.F.bind(this);break;case h.D:s=this.D.bind(this);break;case h.L:s=this.L.bind(this);break;case h.B:s=this.B.bind(this);break;case h.M:s=this.M.bind(this);break;case h.E:s=this.E.bind(this);break;case h.S:s=this.S.bind(this);break;case h.X:s=this.X.bind(this);break;case h.Y:s=this.Y.bind(this);break;case h.Z:s=this.Z.bind(this);break;default:console.warn("Unsupported cube move",t)}const e=t.turnType===i.CounterClockwise;s(e,t.slices),t.turnType===i.Double&&s(e,t.slices)}))}}function yt(){var t=new bt(16);return bt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function St(t,s,e){var i,r,h,o,a,n,c,l,u,d,f,p,b=e[0],w=e[1],g=e[2];return s===t?(t[12]=s[0]*b+s[4]*w+s[8]*g+s[12],t[13]=s[1]*b+s[5]*w+s[9]*g+s[13],t[14]=s[2]*b+s[6]*w+s[10]*g+s[14],t[15]=s[3]*b+s[7]*w+s[11]*g+s[15]):(i=s[0],r=s[1],h=s[2],o=s[3],a=s[4],n=s[5],c=s[6],l=s[7],u=s[8],d=s[9],f=s[10],p=s[11],t[0]=i,t[1]=r,t[2]=h,t[3]=o,t[4]=a,t[5]=n,t[6]=c,t[7]=l,t[8]=u,t[9]=d,t[10]=f,t[11]=p,t[12]=i*b+a*w+u*g+s[12],t[13]=r*b+n*w+d*g+s[13],t[14]=h*b+c*w+f*g+s[14],t[15]=o*b+l*w+p*g+s[15]),t}function Mt(t,s,e){var i=e[0],r=e[1],h=e[2];return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*r,t[5]=s[5]*r,t[6]=s[6]*r,t[7]=s[7]*r,t[8]=s[8]*h,t[9]=s[9]*h,t[10]=s[10]*h,t[11]=s[11]*h,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}class Rt{constructor(){this.matrix=yt(),this.centroid=[0,0,0]}translate(t){St(this.matrix,this.matrix,t)}rotate(t,s){!function(t,s,e,i){var r,h,o,a,n,c,l,u,d,f,p,b,w,g,C,k,F,m,E,y,S,M,R,L,T=i[0],B=i[1],P=i[2],I=Math.hypot(T,B,P);I<1e-6||(T*=I=1/I,B*=I,P*=I,r=Math.sin(e),o=1-(h=Math.cos(e)),a=s[0],n=s[1],c=s[2],l=s[3],u=s[4],d=s[5],f=s[6],p=s[7],b=s[8],w=s[9],g=s[10],C=s[11],k=T*T*o+h,F=B*T*o+P*r,m=P*T*o-B*r,E=T*B*o-P*r,y=B*B*o+h,S=P*B*o+T*r,M=T*P*o+B*r,R=B*P*o-T*r,L=P*P*o+h,t[0]=a*k+u*F+b*m,t[1]=n*k+d*F+w*m,t[2]=c*k+f*F+g*m,t[3]=l*k+p*F+C*m,t[4]=a*E+u*y+b*S,t[5]=n*E+d*y+w*S,t[6]=c*E+f*y+g*S,t[7]=l*E+p*y+C*S,t[8]=a*M+u*R+b*L,t[9]=n*M+d*R+w*L,t[10]=c*M+f*R+g*L,t[11]=l*M+p*R+C*L,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]))}(this.matrix,this.matrix,t,s)}scale(t){Mt(this.matrix,this.matrix,t)}setColor(t){this.color=t}}class Lt extends Rt{constructor(t=[]){super(),this.setObjects(t)}setObjects(t){this.objects=t}addObject(t){this.objects.push(t)}setCentroid(t){this.centroid=t}}const Tt=Math.sqrt(3),Bt=Math.atan(kt(15)),Pt=kt(30),It=kt(60);class Ut{constructor(t=z,s=N,e=!1,i=.7){this.sideLength=i,this.halfSide=this.sideLength/2,this.halfEdgePiece=this.halfSide*Bt,this.layerWidth=this.halfSide-this.halfEdgePiece,this.middleWidth=this.sideLength-2*this.layerWidth,this.halfMiddleWidth=this.middleWidth/2,this.borderLayerWidth=.2*this.sideLength,this.outerHalfSide=(i+this.borderLayerWidth)/2,this.outerHalfEdgePiece=this.outerHalfSide*Bt,this.pieces=this.buildSquare1(t,s,e),this.group=new Lt(this.pieces)}makeLayer(t){let s=[],e=Math.PI;return t.forEach(((t,i)=>{switch(t.type){case T.CORNER:const i=this.square1Corner(t.colors[0],t.colors[1],t.colors[2]);i.rotate(e,[0,0,1]),s.push(i),e-=It;break;case T.EDGE:const r=this.square1Edge(t.colors[0],t.colors[1]);r.rotate(e-It,[0,0,1]),s.push(r),e-=Pt}})),s}setColors(t){}}const vt=(()=>{let t=0;return function(){return t++}})();class xt{constructor(t,s,e){this.indices=t,this.color=e,this.uid=vt(),s&&this.calculateCentroid(s)}calculateCentroid(t){this.centroid=mt(t.filter(((t,s)=>this.indices.includes(s))))}}class Dt extends Rt{constructor(t,s){super(),this.vertices=t,this.faces=s,this.centroid=mt(this.vertices)}}class zt extends Ut{square1Corner(t,s,e){const i=[[0,0,0],[this.halfSide,this.halfEdgePiece,0],[this.halfSide,this.halfSide,0],[this.halfEdgePiece,this.halfSide,0],[this.outerHalfSide,this.outerHalfEdgePiece,0],[this.outerHalfSide,this.outerHalfSide,0],[this.outerHalfEdgePiece,this.outerHalfSide,0]],r=[new xt([0,1,2,3],i,t),new xt([2,3,6,5],i,s),new xt([1,2,5,4],i,e)];return new Dt(i,r)}square1Edge(t,s){const e=[Ct(wt(),[0,0,0],[0,0,0],Pt),Ct(wt(),[this.halfEdgePiece,this.halfSide,0],[0,0,0],Pt),Ct(wt(),[-this.halfEdgePiece,this.halfSide,0],[0,0,0],Pt),Ct(wt(),[this.outerHalfEdgePiece,this.outerHalfSide,0],[0,0,0],Pt),Ct(wt(),[-this.outerHalfEdgePiece,this.outerHalfSide,0],[0,0,0],Pt)],i=[new xt([0,1,2],e,t),new xt([1,2,4,3],e,s)];return new Dt(e,i)}square1Middle(t,s,e,i){const r=this.halfSide-this.halfEdgePiece,h=(this.sideLength-2*r)/2,o=this.outerHalfSide-this.outerHalfEdgePiece,a=[[-this.outerHalfSide,h,-.01],[-this.outerHalfEdgePiece,h,-.01],[this.outerHalfSide,h,-.01],[-this.outerHalfSide,-h,-.01],[-this.outerHalfEdgePiece,-h,-.01],[this.outerHalfSide,-h,-.01],[2*this.outerHalfEdgePiece,h,-.01],[2*this.outerHalfEdgePiece,-h,-.01],[2*o,h,-.01],[2*o,-h,-.01]],n=[new xt([0,1,4,3],a,t)];return i?(n.push(new xt([1,6,7,4],a,e)),n.push(new xt([6,8,9,7],a,s))):n.push(new xt([1,2,5,4],a,t)),new Dt(a,n)}buildSquare1(t,s,e){const i=this.halfSide-this.halfEdgePiece,r=(this.sideLength-2*i)/2;let h=[];const o=new Lt(this.makeLayer(t)),a=new Lt(this.makeLayer(s));o.translate([0,this.outerHalfSide+r,0]),a.translate([0,-(this.outerHalfSide+r),0]),a.rotate(Pt,[0,0,1]),h=[o,a];const n=this.square1Middle(U,x,D,e);return h.push(n),h}}class Nt extends Ut{constructor(t=z,s=N,e=!1,i=1.25){super(t,s,e,i),this.group.rotate(-.985398,[1,0,0]),this.group.rotate(-.59,[0,0,1])}square1Corner(t,s,e){const i=[[0,0,this.halfSide],[this.halfSide,this.halfEdgePiece,this.halfSide],[this.halfSide,this.halfSide,this.halfSide],[this.halfEdgePiece,this.halfSide,this.halfSide],[0,0,this.halfSide-this.layerWidth],[this.halfSide,this.halfEdgePiece,this.halfSide-this.layerWidth],[this.halfSide,this.halfSide,this.halfSide-this.layerWidth],[this.halfEdgePiece,this.halfSide,this.halfSide-this.layerWidth]],r=[new xt([0,1,2,3],i,t),new xt([2,3,7,6],i,s),new xt([1,2,6,5],i,e)];return new Dt(i,r)}square1Edge(t,s){const e=[Ct(wt(),[0,0,this.halfSide],[0,0,0],Pt),Ct(wt(),[this.halfEdgePiece,this.halfSide,this.halfSide],[0,0,0],Pt),Ct(wt(),[-this.halfEdgePiece,this.halfSide,this.halfSide],[0,0,0],Pt),Ct(wt(),[0,0,this.halfSide-this.layerWidth],[0,0,0],Pt),Ct(wt(),[this.halfEdgePiece,this.halfSide,this.halfSide-this.layerWidth],[0,0,0],Pt),Ct(wt(),[-this.halfEdgePiece,this.halfSide,this.halfSide-this.layerWidth],[0,0,0],Pt)],i=[new xt([0,1,2],e,t),new xt([1,2,5,4],e,s)];return new Dt(e,i)}square1Middle(t,s,e){const i=[[-this.halfSide,-this.halfSide,this.halfMiddleWidth],[-this.halfSide,this.halfSide,this.halfMiddleWidth],[this.halfEdgePiece,this.halfSide,this.halfMiddleWidth],[-this.halfEdgePiece,-this.halfSide,this.halfMiddleWidth],[-this.halfSide,-this.halfSide,-this.halfMiddleWidth],[-this.halfSide,this.halfSide,-this.halfMiddleWidth],[this.halfEdgePiece,this.halfSide,-this.halfMiddleWidth],[-this.halfEdgePiece,-this.halfSide,-this.halfMiddleWidth]],r=[new xt([0,1,2,3],i,{value:"#333"}),new xt([4,5,6,7],i,{value:"#333"}),new xt([0,1,5,4],i,s),new xt([1,2,6,5],i,e),new xt([2,3,7,6],i,{value:"#333"}),new xt([0,3,7,4],i,t)];return new Dt(i,r)}buildSquare1(t,s,e){const i=new Lt(this.makeLayer(t)),r=new Lt(this.makeLayer(s));i.translate([0,0,.005]),r.translate([0,0,-.005]),r.rotate(Math.PI,[1,0,0]),r.rotate(Pt,[0,0,1]);const h=[i,r],o=this.square1Middle(U,v,D),a=this.square1Middle(D,x,U);return a.rotate(Math.PI,[0,0,1]),e&&a.rotate(Math.PI,B),h.push(o),h.push(a),h}}class At extends Dt{constructor(t,s,e){let i=[gt([0,0,0]),gt([t,0,0]),gt([t,-s,0]),gt([0,-s,0])];super(i,[new xt([0,1,2,3],i,e)])}}class jt extends Dt{constructor(t,s,e,i){let r=[t,s,e];super(r,[new xt([0,1,2],r,i)])}}class Wt{constructor(){const t=Math.sqrt(2*Math.pow(.5,2)),s=new Lt(this.makeStickers(b,t,[-1,0,0])),e=new Lt(this.makeStickers(p,t,[2,0,0])),i=new Lt(this.makeStickers(w,t,[0,-1,0])),r=new Lt(this.makeStickers(C,t,[1,0,0])),h=new Lt(this.makeStickers(k,t,[0,1,0])),o=new Lt(this.makeStickers(g,t,[0,0,0]));this.U=h,this.R=r,this.F=o,this.L=s,this.B=e,this.D=i,this.stickers=[s,e,i,r,h,o],this.group=new Lt(this.stickers),this.group.translate([-1/4,0,0]),this.group.scale([.5,.5,.5])}makeStickers(t,s,e){const i=new At(s,s,t);i.translate(e),i.rotate(Math.PI/4,[0,0,1]),i.translate([-s/2,s/2,0]);const r=[];for(let i=0;i<4;i++){const h=new jt([-s/2,s/2,0],[0,s,0],[s/2,s/2,0],t);h.translate(e),h.rotate(-Math.PI/2*i,[0,0,1]),h.rotate(Math.PI/4,[0,0,1]),r.push(h)}return[i,...r]}setColors(t){let{top:s,right:e,front:i,bottom:r,left:h,back:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}setFaceColors(t,s=[]){t.objects[0].faces[0].color=s[0]||R,t.objects[1].faces[0].color=s[1]||R,t.objects[2].faces[0].color=s[2]||R,t.objects[3].faces[0].color=s[4]||R,t.objects[4].faces[0].color=s[3]||R}}class Ot{constructor(){const t=Math.sqrt(2*Math.pow(.625,2)),s=.625,e=new Lt(this.makeStickers(b,t)),i=new Lt(this.makeStickers(p,t,[1,0,0])),r=new Lt(this.makeStickers(w,t,[0,1,0])),h=new Lt(this.makeStickers(C,t)),o=new Lt(this.makeStickers(k,t,[0,1,0])),a=new Lt(this.makeStickers(g,t,[1,0,0]));this.U=i,this.R=e,this.F=r,this.L=h,this.B=o,this.D=a,e.translate([0,0,s]),e.rotate(Math.PI,[1,0,0]),e.rotate(Math.PI/2,[0,0,1]),h.rotate(-Math.PI/2,[0,0,1]),h.translate([0,0,-.625]),r.rotate(-Math.PI/2,[1,0,0]),r.translate([-.625,0,0]),o.translate([s,0,0]),o.rotate(Math.PI,[0,1,0]),o.rotate(-Math.PI/2,[1,0,0]),i.rotate(Math.PI,[0,1,0]),i.translate([0,s,0]),a.translate([0,-.625,0]),a.rotate(Math.PI,[1,0,0]),this.stickers=[e,i,r,h,o,a],this.group=new Lt(this.stickers),this.group.rotate(.593411946,[1,0,0]),this.group.rotate(.785398,[0,1,0])}makeStickers(t,s,e){const i=new At(s,s,t);e&&i.rotate(Math.PI/2,e),i.rotate(Math.PI/4,[0,0,1]),i.translate([-s/2,s/2,0]);const r=[];for(let i=0;i<4;i++){const h=new jt([-s/2,s/2,0],[0,s,0],[s/2,s/2,0],t);e&&h.rotate(Math.PI/2,e),h.rotate(Math.PI/2*i,[0,0,1]),h.rotate(Math.PI/4,[0,0,1]),r.push(h)}return[i,...r]}setColors(t){let{top:s,right:e,front:i,bottom:r,left:h,back:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}setFaceColors(t,s=[]){t.objects[0].faces[0].color=s[0]||R,t.objects[1].faces[0].color=s[1]||R,t.objects[2].faces[0].color=s[2]||R,t.objects[3].faces[0].color=s[4]||R,t.objects[4].faces[0].color=s[3]||R}}class $t extends Dt{constructor(t,s,e){const i=t/2,r=t*(Tt/2),h=t/s,o=r/s,a=r/3;let n=[],c=[],l=0;for(let t=0;t<=s;t++)for(let r=0,u=s-t;r<=u;r++){const s=h*r+t*h/2-i,d=o*t-a;n.push([s,d,0]),t>0&&(r>0&&c.push(new xt([l,l-1,l-u-2],null,e)),c.push(new xt([l,l-u-2,l-u-1],null,e))),l++}c.forEach((t=>t.calculateCentroid(n))),super(n,c)}}const qt=60*Math.PI/180;class Gt{constructor(t,s=.925){this.size=t;const e=s*(Tt/2)/1.5,i=new $t(s,t,p),r=new $t(s,t,k),h=new $t(s,t,w),o=new $t(s,t,b);this.L=h,this.R=r,this.U=i,this.B=o,r.rotate(-qt,[0,0,1]),r.translate([0,e,0]),r.rotate(2*qt,[0,0,1]),i.rotate(qt,[0,0,1]),i.translate([0,e,0]),i.rotate(-2*qt,[0,0,1]),o.rotate(3*qt,[0,0,1]),o.translate([0,e,0]),o.rotate(-2*qt,[0,0,1]),this.faces=[i,r,h,o],this.group=new Lt(this.faces)}setColors(t){let{left:s,right:e,top:i,back:r}=t;this.setFaceColors(this.L,s),this.setFaceColors(this.R,e),this.setFaceColors(this.U,i),this.setFaceColors(this.B,r)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=R}))}}const _t=Math.acos(1/3),Ht=120*Math.PI/180,Xt=Math.sqrt(24);class Yt{constructor(t,s=1.75){this.size=t;const e=s/Xt,i=new $t(s,t,p),r=new $t(s,t,k),h=new $t(s,t,w),o=new $t(s,t,b);this.L=h,this.R=r,this.U=i,this.B=o,i.rotate(Ht,[0,0,1]),i.rotate(_t,[1,0,0]),i.translate([0,0,e]),r.rotate(_t,[1,0,0]),r.translate([0,0,e]),h.rotate(-Ht,[0,0,1]),h.rotate(_t,[1,0,0]),h.translate([0,0,e]),o.rotate(Math.PI,[0,1,0]),o.translate([0,0,e]),this.faces=[i,h,r,o],this.group=new Lt(this.faces),this.group.rotate(-Math.PI/3,[1,0,0]),this.group.rotate(Math.PI/2.5,[0,0,1])}setColors(t){let{left:s,right:e,top:i,back:r}=t;this.setFaceColors(this.L,s),this.setFaceColors(this.R,e),this.setFaceColors(this.U,i),this.setFaceColors(this.B,r)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=R}))}}class Zt extends Dt{constructor(t,s=2,e=1.6,i=.4){const r=function(t){return t/(2*Math.sin(Math.PI/5))}(e),h=function(t){const s=t*t,e=71*Math.PI/180,i=2*s-2*s*Math.cos(e);return 2*Math.sqrt(Math.abs(s-i))}(i),o=function(t,s,e,i){let r=[];for(let h=0;h<t;h++){const t=s+e*h;r=[...r,...Jt(h,t,i)]}return r}(s,r-h*(s-1),h,i);super(o,function(t,s,e){let i=[];const r=new xt([0,1,2,3,4],e,s);i.push(r);let h=5,o=5;for(let r=1;r<t;r++){const t=5+10*r;h+=t;const a=Qt(r),n=Vt(r-1),c=Vt(r);for(;o<h;){const r=o-(n[n.length-1]+1);if(r%(t/5)==0){o++;continue}const h=(r+1)%(t/5)==0;let l=o,u=c[(r+1)%c.length],d=h?u+1:a.shift(),f=h?a.shift():n[(n.indexOf(d)-1+n.length)%n.length];o++,i.push(new xt([l,u,d,f],e,s))}}return i}(s,t,o))}}function Qt(t){if(t<1)return[];let s=[];const e=5+10*(t-1);let i=5*(t-1)*(t-1);for(let t=0;t<e;t++)s.push(t+i),t%(e/5)==0&&s.push(t+i);return s.push(s.shift()),s.push(s.shift()),s}function Vt(t){let s=5*t*t,e=[];for(let i=0,r=5+10*t;i<r;i++)e.push(i+s);return e}function Kt(t,s,e,i){if(0===e)return[[t[0],t[1],0],[s[0],s[1],0]];const r=function(t,s){return Math.sqrt(Math.pow(s[1]-t[1],2)+Math.pow(s[0]-t[0],2))}(t,s);let h=[];for(let o=e;o>0;o--){let e=[t[0]+(s[0]-t[0])/r*i*o,t[1]+(s[1]-t[1])/r*i*o,0];h.unshift(e);let a=[s[0]+(t[0]-s[0])/r*i*o,s[1]+(t[1]-s[1])/r*i*o,0];h.push(a)}return h.unshift([t[0],t[1],0]),h.push([s[0],s[1],0]),h}function Jt(t,s,e){let i=[];for(let r=0;r<5;r++){const h=Ft(s,r*(2*Math.PI)/5-Math.PI/10);if(i.length>0){const s=i[i.length-1],r=Kt([s[0],s[1]],h,t,e);r.shift(),i=i.concat(r)}else i.push([h[0],h[1],0])}const r=i[0],h=i[i.length-1],o=Kt([h[0],h[1]],[r[0],r[1]],t,e);return o.pop(),o.shift(),i=i.concat(o),i}const ts=36*Math.PI/180,ss=72*Math.PI/180,es={2:.3,3:.17,4:.121};class is{constructor(t){this.layers=t;const s=.75,e=function(t,s){return es[s]||t/(1.9*s)}(length,t);this.U=new Zt(g,t,s,e),this.F=new Zt(b,t,s,e),this.L=new Zt(k,t,s,e),this.BL=new Zt(F,t,s,e),this.BR=new Zt(p,t,s,e),this.R=new Zt(w,t,s,e),this.d=new Zt(m,t,s,e),this.bl=new Zt(E,t,s,e),this.dl=new Zt(y,t,s,e),this.dr=new Zt(M,t,s,e),this.br=new Zt(S,t,s,e),this.b=new Zt(C,t,s,e);const i=.75/(2*Math.tan(Math.PI/5))*2;this.F.translate([0,i,0]),this.F.rotate(5*ts,[0,0,1]),this.L.rotate(-ss,[0,0,1]),this.L.translate([0,i,0]),this.L.rotate(3*ts,[0,0,1]),this.BL.rotate(-2*ss,[0,0,1]),this.BL.translate([0,i,0]),this.BL.rotate(-ts,[0,0,1]),this.BR.rotate(2*ss,[0,0,1]),this.BR.translate([0,i,0]),this.BR.rotate(ts,[0,0,1]),this.R.rotate(ss,[0,0,1]),this.R.translate([0,i,0]),this.R.rotate(-3*ts,[0,0,1]),this.d.rotate(Math.PI,[0,0,1]),this.d.rotate(-2*ts,[0,0,1]),this.b.rotate(3*ts,[0,0,1]),this.b.translate([0,i,0]),this.b.rotate(5*ts,[0,0,1]),this.bl.rotate(ts,[0,0,1]),this.bl.translate([0,i,0]),this.bl.rotate(3*ts,[0,0,1]),this.dl.rotate(-ts,[0,0,1]),this.dl.translate([0,i,0]),this.dl.rotate(-ts,[0,0,1]),this.dr.rotate(-3*ts,[0,0,1]),this.dr.translate([0,i,0]),this.dr.rotate(ts,[0,0,1]),this.br.rotate(5*ts,[0,0,1]),this.br.translate([0,i,0]),this.br.rotate(-3*ts,[0,0,1]);const r=new Lt([this.U,this.F,this.L,this.BL,this.BR,this.R]),h=new Lt([this.d,this.bl,this.dr,this.dl,this.br,this.b]);h.rotate(-ss,[0,0,1]),h.translate([0,2*i,0]),h.rotate(2*ss,[0,0,1]),h.translate([0,-i,0]),this.group=new Lt([r,h]),this.group.scale([.33,.33,.33]),this.group.translate([-1.3125,0,0])}setColors(t){let{U:s,R:e,F:i,d:r,L:h,b:o,dr:a,dl:n,br:c,BR:l,BL:u,bl:d}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.d,r),this.setFaceColors(this.L,h),this.setFaceColors(this.b,o),this.setFaceColors(this.dr,a),this.setFaceColors(this.dl,n),this.setFaceColors(this.BR,l),this.setFaceColors(this.BL,u),this.setFaceColors(this.bl,d),this.setFaceColors(this.br,c)}oldSetColors(t){const s=this.layers,e=5*s*s-5*s+1;let[i,r,h,o,a,n,c,l,u,d,f,p]=function(t,s){const e=Math.ceil(t.length/s);return new Array(e).fill(null).map(((e,i)=>t.slice(i*s,(i+1)*s)))}(t,e);this.setFaceColors(this.U,i),this.setFaceColors(this.R,r),this.setFaceColors(this.F,h),this.setFaceColors(this.d,c),this.setFaceColors(this.L,n),this.setFaceColors(this.b,p),this.setFaceColors(this.dr,o),this.setFaceColors(this.dl,a),this.setFaceColors(this.br,l),this.setFaceColors(this.BR,u),this.setFaceColors(this.BL,d),this.setFaceColors(this.bl,f)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=R}))}}const rs={2:.3,3:.17,4:.121};class hs{constructor(t=2){this.layers=t;const s=.75,e=.375*Math.sqrt(2.5+1.1*Math.sqrt(5)),i=function(t,s){return rs[s]||.75/(1.9*s)}(0,t);this.U=new Zt(g,t,s,i),this.F=new Zt(b,t,s,i),this.R=new Zt(w,t,s,i),this.dr=new Zt(M,t,s,i),this.dl=new Zt(y,t,s,i),this.L=new Zt(k,t,s,i),this.d=new Zt(m,t,s,i),this.br=new Zt(S,t,s,i),this.BR=new Zt(p,t,s,i),this.BL=new Zt(F,t,s,i),this.bl=new Zt(E,t,s,i),this.b=new Zt(C,t,s,i),this.F.translate([0,0,e]),this.b.rotate(Math.PI,[0,0,1]),this.b.rotate(Math.PI,[0,1,0]),this.b.translate([0,0,e]),this.U.rotate(Math.PI,[0,0,1]),this.U.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.U.translate([0,0,e]),this.L.rotate(72*Math.PI/180,[0,0,1]),this.L.rotate(Math.PI,[0,0,1]),this.L.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.L.translate([0,0,e]),this.R.rotate(72*Math.PI/180,[0,0,1]),this.R.rotate(Math.PI/5,[0,0,1]),this.R.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.R.translate([0,0,e]),this.dr.rotate(72*Math.PI/180,[0,0,1]),this.dr.rotate(-Math.PI/5,[0,0,1]),this.dr.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.dr.translate([0,0,e]),this.dl.rotate(72*Math.PI/180,[0,0,1]),this.dl.rotate(-3*Math.PI/5,[0,0,1]),this.dl.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.dl.translate([0,0,e]),this.BL.rotate(Math.PI/5,[0,0,1]),this.BL.rotate(-116.57*Math.PI/180,[1,0,0]),this.BL.translate([0,0,e]),this.BR.rotate(-Math.PI/5,[0,0,1]),this.BR.rotate(-116.57*Math.PI/180,[1,0,0]),this.BR.translate([0,0,e]),this.bl.rotate(3*Math.PI/5,[0,0,1]),this.bl.rotate(-116.57*Math.PI/180,[1,0,0]),this.bl.translate([0,0,e]),this.d.rotate(5*Math.PI/5,[0,0,1]),this.d.rotate(-116.57*Math.PI/180,[1,0,0]),this.d.translate([0,0,e]),this.br.rotate(7*Math.PI/5,[0,0,1]),this.br.rotate(-116.57*Math.PI/180,[1,0,0]),this.br.translate([0,0,e]),this.stickers=[this.U,this.F,this.R,this.dr,this.dl,this.L,this.d,this.br,this.BR,this.BL,this.bl,this.b],this.group=new Lt(this.stickers)}setColors(t){let{U:s,R:e,F:i,d:r,L:h,b:o,dr:a,dl:n,br:c,BR:l,BL:u,bl:d}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.d,r),this.setFaceColors(this.L,h),this.setFaceColors(this.b,o),this.setFaceColors(this.dr,a),this.setFaceColors(this.dl,n),this.setFaceColors(this.BR,l),this.setFaceColors(this.BL,u),this.setFaceColors(this.bl,d),this.setFaceColors(this.br,c)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=R}))}}function os(t,s,e){const i=t/2,r=t/s,h=r/2;let o=[];for(let a=0;a<s;a++){let n=-(-i+h+r*a);o=o.concat(as(t,s,e,n))}return o}function as(t,s,e,i=0){const r=t/2,h=t/s,o=h/2;let a=[];for(let t=0;t<s;t++){let s=-r+o+h*t,n=[[-o+s,o+i,0],[o+s,o+i,0],[o+s,-o+i,0],[-o+s,-o+i,0]],c=[new xt([0,1,2,3],n,e)];a.push(new Dt(n,c))}return a}class ns{constructor(t,s=Math.PI/4){this.size=t,this.stickerWidth=.5,this.halfStickerWidth=this.stickerWidth/2,this.cubeWidth=this.stickerWidth*t,this.halfCubeWidth=this.cubeWidth/2,this.U=new Lt(os(this.cubeWidth,this.size,p)),this.R=new Lt(as(this.cubeWidth,this.size,b)),this.F=new Lt(as(this.cubeWidth,this.size,w)),this.B=new Lt(as(this.cubeWidth,this.size,k)),this.L=new Lt(as(this.cubeWidth,this.size,C));const e=this.halfCubeWidth+this.halfStickerWidth;this.B.translate([0,e,0]),this.B.rotate(Math.PI,[0,0,1]),this.F.translate([0,-e,0]),this.R.translate([e,0,0]),this.R.rotate(Math.PI/2,[0,0,1]),this.L.translate([-e,0,0]),this.L.rotate(-Math.PI/2,[0,0,1]),this.rotateBorder(this.F.objects,s),this.rotateBorder(this.R.objects,s),this.rotateBorder(this.B.objects,s),this.rotateBorder(this.L.objects,s),this.stickers=[this.U,this.R,this.F,this.B,this.L],this.group=new Lt(this.stickers)}setFaceColors(t,s){t.objects.forEach(((t,e)=>{s&&s[e]?t.faces[0].color=s[e]:t.faces[0].color=R}))}setColors(t){let{U:s,R:e,F:i,L:r,B:h}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.L,r),this.setFaceColors(this.B,h)}rotateBorder(t,s){t.forEach((t=>{t.vertices=t.vertices.map((t=>{return e=t,i=t,r=[0,this.halfStickerWidth,0],h=s,a=[],(o=[])[0]=i[0]-r[0],o[1]=i[1]-r[1],o[2]=i[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(h)-o[2]*Math.sin(h),a[2]=o[1]*Math.sin(h)+o[2]*Math.cos(h),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e;var e,i,r,h,o,a}))}))}}class cs{constructor(t){this.size=t;const s=os(1,t,p),e=os(1,t,b),i=os(1,t,w),r=os(1,t,g),h=os(1,t,C),o=os(1,t,k);this.U=new Lt(s),this.U.translate([0,1,0]),this.R=new Lt(e),this.R.translate([1,0,0]),this.F=new Lt(i),this.D=new Lt(r),this.D.translate([0,-1,0]),this.L=new Lt(h),this.L.translate([-1,0,0]),this.B=new Lt(o),this.B.translate([2,0,0]),this.stickers=[this.U,this.R,this.F,this.D,this.L,this.B],this.group=new Lt(this.stickers),this.group.translate([-1/4,0,0]),this.group.scale([.5,.5,.5])}setFaceColors(t,s){t.objects.forEach(((t,e)=>{s&&s[e]?t.faces[0].color=s[e]:t.faces[0].color=R}))}setColors(t){let{U:s,R:e,F:i,D:r,L:h,B:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}}class ls{constructor(t){this.size=t;const s=1.5,e=.75;this.U=new Lt(os(s,t,p)),this.R=new Lt(os(s,t,b)),this.F=new Lt(os(s,t,w)),this.D=new Lt(os(s,t,g)),this.L=new Lt(os(s,t,C)),this.B=new Lt(os(s,t,k)),this.U.rotate(-Math.PI/2,[0,1,0]),this.U.rotate(-Math.PI/2,[1,0,0]),this.U.translate([0,0,e]),this.R.translate([0,0,e]),this.F.rotate(-Math.PI/2,[0,1,0]),this.F.translate([0,0,e]),this.D.rotate(-Math.PI/2,[0,1,0]),this.D.rotate(Math.PI/2,[1,0,0]),this.D.translate([0,0,e]),this.L.rotate(-Math.PI,[0,1,0]),this.L.translate([0,0,e]),this.B.rotate(Math.PI/2,[0,1,0]),this.B.translate([0,0,e]),this.stickers=[this.U,this.R,this.F,this.D,this.L,this.B],this.group=new Lt(this.stickers),this.group.translate([0,0,-1]),this.group.rotate(.593411946,[1,0,0]),this.group.rotate(.785398,[0,1,0])}setFaceColors(t,s){t.objects.forEach(((t,e)=>{s&&s[e]?t.faces[0].color=s[e]:t.faces[0].color=R}))}setColors(t){let{U:s,R:e,F:i,D:r,L:h,B:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}}function us(t,s,e,i){const r=function(t){return t.reduce(((t,s)=>`${t?t+" ":""}${s[0]}, ${s[1]}`),"")}(s),h=e?e.value:"black",o=e&&e.stroke||"#000000";t.setAttributeNS(null,"points",r),t.setAttributeNS(null,"fill",h),i&&(t.setAttributeNS(null,"stroke",o),t.setAttributeNS(null,"stroke-width",i)),t.setAttributeNS(null,"stroke-linejoin","round")}class ds{constructor(t,s,e,i,r,h){this.strokeWidth="0.035",this.polygons=[],this.uidToPolygon={},this.domElement=document.createElement("div"),this.domElement.className="svg-renderer",this.svgElement=function(t,s,e,i,r,h){const o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",s.toString()),o.setAttributeNS(null,"viewBox",`${e} ${i} ${r} ${h}`),o.setAttributeNS(null,"id","sr-visualizer"),o}(t,s,e,i,r,h),this.domElement.appendChild(this.svgElement)}render(t,s){this.polygons=[],t.objects.forEach((t=>{this.renderObject3D(t,s,[])})),this.renderPolygons()}renderPolygons(){this.polygons.sort(((t,s)=>t.centroid[2]-s.centroid[2])),this.polygons.forEach((t=>this.svgElement.appendChild(t.polygon)))}addPolygon(t,s,e,i){this.uidToPolygon[s.uid]?us(this.uidToPolygon[s.uid],t,s.color||e.color,this.strokeWidth):this.uidToPolygon[s.uid]=function(t,s,e){const i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return us(i,t,s,e),i}(t,s.color||e.color,this.strokeWidth),this.polygons.push({polygon:this.uidToPolygon[s.uid],centroid:this.applyTransformations(s.centroid,[e.matrix,...i])})}renderObject3D(t,s,e){if(t instanceof Dt)this.renderGeometry(t,s,e);else if(t instanceof Lt){let i=t;this.sortObjects(i.objects,s,[i.matrix,...e]),i.objects.forEach((t=>{this.renderObject3D(t,s,[i.matrix,...e])}))}}renderGeometry(t,s,e){t.faces.forEach((i=>{let r=[];i.indices.map((s=>t.vertices[s])).forEach((i=>{let h=[t.matrix,...e,s.matrix],o=this.applyTransformations(i,h),a=(c=o,l=[1,-1,1],(n=o)[0]=c[0]*l[0],n[1]=c[1]*l[1],n[2]=c[2]*l[2],n);var n,c,l;r.push(a)})),this.addPolygon(r,i,t,e)}))}sortFaces(t,s,e){t.sort(((t,i)=>{let r=[s.matrix,...e],h=[s.matrix,...e],o=this.applyTransformations(t.centroid,r),a=this.applyTransformations(i.centroid,h);return o[2]-a[2]}))}sortObjects(t,s,e){t.sort(((t,s)=>{let i=[t.matrix,...e],r=[s.matrix,...e],h=this.applyTransformations(t.centroid,i),o=this.applyTransformations(s.centroid,r);return h[2]-o[2]}))}applyTransformations(t,s){return s.reduce(((t,s)=>{return e=t,r=s,h=(i=t)[0],o=i[1],a=i[2],n=(n=r[3]*h+r[7]*o+r[11]*a+r[15])||1,e[0]=(r[0]*h+r[4]*o+r[8]*a+r[12])/n,e[1]=(r[1]*h+r[5]*o+r[9]*a+r[13])/n,e[2]=(r[2]*h+r[6]*o+r[10]*a+r[14])/n,e;var e,i,r,h,o,a,n}),gt(t))}}class fs{constructor(){var t,s,e,i;this.matrix=yt(),t=this.matrix,s=Math.PI/2,i=1/Math.tan(s/2),t[0]=i/1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,e=1/-999.9,t[10]=1000.1*e,t[14]=200*e,St(this.matrix,this.matrix,[0,0,-5]),Mt(this.matrix,this.matrix,[4,4,1])}}class ps{constructor(){this.objects=[]}add(t){this.objects.push(t)}clear(){this.objects=[]}}var bs;function ws(t){const s=new O;return t.case?s.case(t.case):t.alg&&s.alg(t.alg),s}!function(t){t.CUBE="cube",t.CUBE_NET="cube-net",t.CUBE_TOP="cube-top",t.MEGAMINX="megaminx",t.MEGAMINX_NET="megaminx-net",t.PYRAMINX="pyraminx",t.PYRAMINX_NET="pyraminx-net",t.SKEWB="skewb",t.SKEWB_NET="skewb-net",t.SQUARE1="square1",t.SQUARE1_NET="square1-net"}(bs||(bs={}));const gs={size:3,scheme:{U:p,R:b,F:w,D:g,L:C,B:k}},Cs={size:2,scheme:{U:g,F:b,R:w,dr:M,dl:y,L:k,d:m,br:S,BR:p,BL:F,bl:E,b:C}},ks={size:3,scheme:{left:w,right:k,top:p,back:b}},Fs={scheme:{top:p,front:w,right:b,back:k,left:C,bottom:g}},ms={};function Es(t){return t===bs.SQUARE1||t===bs.SQUARE1_NET}class ys{constructor(t,s,e={}){this.type=s,this.camera=new fs,this.scene=new ps,this.renderer=t,e=Object.assign(Object.assign({},function(t){switch(t){case bs.CUBE:case bs.CUBE_NET:case bs.CUBE_TOP:return gs;case bs.MEGAMINX:case bs.MEGAMINX_NET:return Cs;case bs.PYRAMINX:case bs.PYRAMINX_NET:return ks;case bs.SKEWB:case bs.SKEWB_NET:return Fs;case bs.SQUARE1:case bs.SQUARE1_NET:return ms;default:throw new Error(`Could not get default options for puzzle ${t}`)}}(s)),e),[this.puzzleGeometry,this.simulator]=function(t,s){switch(t){case bs.CUBE:return function(t={}){return[new ls(t.size),new Et(t.size)]}(s);case bs.CUBE_NET:return function(t={}){return[new cs(t.size),new Et(t.size)]}(s);case bs.CUBE_TOP:return function(t={}){return[new ns(t.size),new Et(t.size)]}(s);case bs.MEGAMINX:return function(t={}){return[new hs(t.size),new at]}(s);case bs.MEGAMINX_NET:return function(t={}){return[new is(t.size),new at]}(s);case bs.PYRAMINX:return function(t={}){return[new Yt(t.size),new st]}(s);case bs.PYRAMINX_NET:return function(t={}){return[new Gt(t.size),new st]}(s);case bs.SKEWB:return[new Ot,new H];case bs.SKEWB_NET:return[new Wt,new H];case bs.SQUARE1:return function(t={}){const s=ws(t);return[new Nt(s.topLayer,s.bottomLayer,s.middleRotated),s]}(s);case bs.SQUARE1_NET:return function(t={}){const s=ws(t);return[new zt(s.topLayer,s.bottomLayer,s.middleRotated),s]}(s)}}(s,e),this.scene.add(this.puzzleGeometry.group),e.stickerColors&&!Es(s)?this.applyManualColors(e):this.applySimulatorColors(e),this.render()}applyManualColors(t){this.puzzleGeometry.setColors(t.stickerColors)}applySimulatorColors(t){t.mask&&this.applyMask(t),(t.alg||t.case)&&this.applyAlgorithm(t);const s=(e=this.simulator.getValues(),i=t.scheme,Object.keys(e).reduce(((t,s)=>(t[s]=e[s].map((t=>i[t]||L)),t)),{}));var e,i;this.puzzleGeometry.setColors(s)}applyAlgorithm(t){Es(this.type)||(t.case?this.simulator.case(t.case):t.alg&&this.simulator.alg(t.alg))}applyMask(t){Object.keys(t.mask).forEach((s=>{t.mask[s].forEach((t=>this.simulator.setValue(s,t,"mask")))}))}render(){this.renderer.render(this.scene,this.camera)}}const Ss={width:500,height:500,minx:-.9,miny:-.9,svgWidth:1.8,svgHeight:1.8,strokeWidth:.02};function Ms(t,s,e={}){if(e=Object.assign(Object.assign({},Ss),e),"string"==typeof t&&null===(t=document.querySelector(t)))throw new Error(`Could not find visuzlier element by query selector: ${t}`);const i=new ds(e.width,e.height,e.minx,e.miny,e.svgWidth,e.svgHeight);return i.strokeWidth=""+e.strokeWidth,t.appendChild(i.domElement),new ys(i,s,e.puzzle)}const Rs={CUBE_3:{LAST_LAYER:{F:[3,4,5,6,7,8],B:[3,4,5,6,7,8],R:[3,4,5,6,7,8],L:[3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8]},F2L:{F:[0,1,2],B:[0,1,2],R:[0,1,2],L:[0,1,2],U:[0,1,2,3,4,5,6,7,8]},FIRST_LAYER:{F:[0,1,2,3,4,5],B:[0,1,2,3,4,5],R:[0,1,2,3,4,5],L:[0,1,2,3,4,5],U:[0,1,2,3,4,5,6,7,8]},OLL:{R:[0,1,2,3,4,5,6,7,8],F:[0,1,2,3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8],L:[0,1,2,3,4,5,6,7,8],B:[0,1,2,3,4,5,6,7,8]},CORNERS_LAST_LAYER:{U:[1,3,5,7],F:[1,3,4,5,6,7,8],B:[1,3,4,5,6,7,8],R:[1,3,4,5,6,7,8],L:[1,3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8]},EDGES_LAST_LAYER:{U:[0,2,6,8],F:[0,2,3,4,5,6,7,8],B:[0,2,3,4,5,6,7,8],R:[0,2,3,4,5,6,7,8],L:[0,2,3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8]}}},Ls={Scene:ps,Camera:fs,CustomSVGRenderer:ds},Ts={RubiksCube:ls,RubiksCubeNet:cs,RubiksCubeTopLayer:ns,Megaminx:hs,MegaminxNet:is,Pyraminx:Yt,PyraminxNet:Gt,Skewb:Ot,SkewbNet:Wt,Square1:Nt,Square1Net:zt},Bs={RubiksCubeSimulator:Et,MegaminxSimulator:at,PyraminxSimulator:st,SkewbSimulator:H,Square1Simualtor:O},Ps={TurnType:i,parseCubeAlgorithm:c,parseMegaminxAlgorithm:ot,parsePyraminxAlgorithm:tt,parseSkewbAlgorithm:G,parseSquare1Algorithm:j}}},s={};function e(i){if(s[i])return s[i].exports;var r=s[i]={exports:{}};return t[i](r,r.exports,e),r.exports}return e.d=(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(195)})()}));
//# sourceMappingURL=puzzleGen.min.js.map