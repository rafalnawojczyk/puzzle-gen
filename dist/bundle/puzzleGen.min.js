!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.puzzleGen=s():t.puzzleGen=s()}(this,(function(){return(()=>{"use strict";var t={162:(t,s,e)=>{e.r(s),e.d(s,{Masks:()=>Rs,SVG:()=>Ss,Type:()=>g,Visualizer:()=>Es,VisualizerType:()=>g});const i={value:"#FFFF00"},r={value:"#FF0000"},h={value:"#0000FF"},o={value:"#FFFFFF"},a={value:"#FFA500"},n={value:"#00FF00"},c={value:"#800080"},l={value:"#808080"},u={value:"#00008B"},d={value:"#ffffb3"},f={value:"#32CD32"},p={value:"#FF69B4"},w={value:"#000000"},b={value:"#404040"};var g;!function(t){t.CUBE="cube",t.CUBE_NET="cube-net",t.CUBE_TOP="cube-top",t.MEGAMINX="megaminx",t.MEGAMINX_NET="megaminx-net",t.PYRAMINX="pyraminx",t.PYRAMINX_NET="pyraminx-net",t.SKEWB="skewb",t.SKEWB_NET="skewb-net",t.SQUARE1="square1",t.SQUARE1_NET="square1-net"}(g||(g={}));class C{constructor(){this.objects=[]}add(t){this.objects.push(t)}clear(){this.objects=[]}}var k="undefined"!=typeof Float32Array?Float32Array:Array;function F(){var t=new k(16);return k!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function E(t,s,e){var i,r,h,o,a,n,c,l,u,d,f,p,w=e[0],b=e[1],g=e[2];return s===t?(t[12]=s[0]*w+s[4]*b+s[8]*g+s[12],t[13]=s[1]*w+s[5]*b+s[9]*g+s[13],t[14]=s[2]*w+s[6]*b+s[10]*g+s[14],t[15]=s[3]*w+s[7]*b+s[11]*g+s[15]):(i=s[0],r=s[1],h=s[2],o=s[3],a=s[4],n=s[5],c=s[6],l=s[7],u=s[8],d=s[9],f=s[10],p=s[11],t[0]=i,t[1]=r,t[2]=h,t[3]=o,t[4]=a,t[5]=n,t[6]=c,t[7]=l,t[8]=u,t[9]=d,t[10]=f,t[11]=p,t[12]=i*w+a*b+u*g+s[12],t[13]=r*w+n*b+d*g+s[13],t[14]=h*w+c*b+f*g+s[14],t[15]=o*w+l*b+p*g+s[15]),t}function y(t,s,e){var i=e[0],r=e[1],h=e[2];return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*r,t[5]=s[5]*r,t[6]=s[6]*r,t[7]=s[7]*r,t[8]=s[8]*h,t[9]=s[9]*h,t[10]=s[10]*h,t[11]=s[11]*h,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)});class M{constructor(){var t,s,e,i;this.matrix=F(),t=this.matrix,s=Math.PI/2,i=1/Math.tan(s/2),t[0]=i/1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,e=1/-999.9,t[10]=1000.1*e,t[14]=200*e,E(this.matrix,this.matrix,[0,0,-5]),y(this.matrix,this.matrix,[4,4,1])}}function m(){var t=new k(3);return k!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function S(t){var s=new k(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}function R(t,s,e,i){var r=[],h=[];return r[0]=s[0]-e[0],r[1]=s[1]-e[1],r[2]=s[2]-e[2],h[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),h[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),h[2]=r[2],t[0]=h[0]+e[0],t[1]=h[1]+e[1],t[2]=h[2]+e[2],t}m();class L{constructor(){this.matrix=F(),this.centroid=[0,0,0]}translate(t){E(this.matrix,this.matrix,t)}rotate(t,s){!function(t,s,e,i){var r,h,o,a,n,c,l,u,d,f,p,w,b,g,C,k,F,E,y,M,m,S,R,L,T=i[0],B=i[1],P=i[2],I=Math.hypot(T,B,P);I<1e-6||(T*=I=1/I,B*=I,P*=I,r=Math.sin(e),o=1-(h=Math.cos(e)),a=s[0],n=s[1],c=s[2],l=s[3],u=s[4],d=s[5],f=s[6],p=s[7],w=s[8],b=s[9],g=s[10],C=s[11],k=T*T*o+h,F=B*T*o+P*r,E=P*T*o-B*r,y=T*B*o-P*r,M=B*B*o+h,m=P*B*o+T*r,S=T*P*o+B*r,R=B*P*o-T*r,L=P*P*o+h,t[0]=a*k+u*F+w*E,t[1]=n*k+d*F+b*E,t[2]=c*k+f*F+g*E,t[3]=l*k+p*F+C*E,t[4]=a*y+u*M+w*m,t[5]=n*y+d*M+b*m,t[6]=c*y+f*M+g*m,t[7]=l*y+p*M+C*m,t[8]=a*S+u*R+w*L,t[9]=n*S+d*R+b*L,t[10]=c*S+f*R+g*L,t[11]=l*S+p*R+C*L,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]))}(this.matrix,this.matrix,t,s)}scale(t){y(this.matrix,this.matrix,t)}setColor(t){this.color=t}}class T extends L{constructor(t=[]){super(),this.setObjects(t)}setObjects(t){this.objects=t}addObject(t){this.objects.push(t)}setCentroid(t){this.centroid=t}}function B(t){return Math.PI*t/180}function P(t,s){return[t*Math.cos(s),t*Math.sin(s)]}function I(t){let s=0,e=0,i=0;return t.forEach((t=>{s+=t[0],e+=t[1],i+=t[2]})),s/=t.length,e/=t.length,i/=t.length,S([s,e,i])}const U=(()=>{let t=0;return function(){return t++}})();class v{constructor(t,s,e){this.indices=t,this.color=e,this.uid=U(),s&&this.calculateCentroid(s)}calculateCentroid(t){this.centroid=I(t.filter(((t,s)=>this.indices.includes(s))))}}class x extends L{constructor(t,s){super(),this.vertices=t,this.faces=s,this.centroid=I(this.vertices)}}function D(t,s,e){const i=t/2,r=t/s,h=r/2;let o=[];for(let a=0;a<s;a++){let n=-(-i+h+r*a);o=o.concat(z(t,s,e,n))}return o}function z(t,s,e,i=0){const r=t/2,h=t/s,o=h/2;let a=[];for(let t=0;t<s;t++){let s=-r+o+h*t,n=[[-o+s,o+i,0],[o+s,o+i,0],[o+s,-o+i,0],[-o+s,-o+i,0]],c=[new v([0,1,2,3],n,e)];a.push(new x(n,c))}return a}class N{constructor(t,s=Math.PI/4){this.size=t,this.stickerWidth=.5,this.halfStickerWidth=this.stickerWidth/2,this.cubeWidth=this.stickerWidth*t,this.halfCubeWidth=this.cubeWidth/2,this.U=new T(D(this.cubeWidth,this.size,i)),this.R=new T(z(this.cubeWidth,this.size,r)),this.F=new T(z(this.cubeWidth,this.size,h)),this.B=new T(z(this.cubeWidth,this.size,n)),this.L=new T(z(this.cubeWidth,this.size,a));const e=this.halfCubeWidth+this.halfStickerWidth;this.B.translate([0,e,0]),this.B.rotate(Math.PI,[0,0,1]),this.F.translate([0,-e,0]),this.R.translate([e,0,0]),this.R.rotate(Math.PI/2,[0,0,1]),this.L.translate([-e,0,0]),this.L.rotate(-Math.PI/2,[0,0,1]),this.rotateBorder(this.F.objects,s),this.rotateBorder(this.R.objects,s),this.rotateBorder(this.B.objects,s),this.rotateBorder(this.L.objects,s),this.stickers=[this.U,this.R,this.F,this.B,this.L],this.group=new T(this.stickers)}setFaceColors(t,s){t.objects.forEach(((t,e)=>{s&&s[e]?t.faces[0].color=s[e]:t.faces[0].color=w}))}setColors(t){let{U:s,R:e,F:i,L:r,B:h}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.L,r),this.setFaceColors(this.B,h)}rotateBorder(t,s){t.forEach((t=>{t.vertices=t.vertices.map((t=>{return e=t,i=t,r=[0,this.halfStickerWidth,0],h=s,a=[],(o=[])[0]=i[0]-r[0],o[1]=i[1]-r[1],o[2]=i[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(h)-o[2]*Math.sin(h),a[2]=o[1]*Math.sin(h)+o[2]*Math.cos(h),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e;var e,i,r,h,o,a}))}))}}var j;!function(t){t[t.CORNER=0]="CORNER",t[t.EDGE=1]="EDGE",t[t.MIDDLE=2]="MIDDLE"}(j||(j={}));const W=[.96875,-.24803,0],A=i,O=o,$=r,q=h,G=n,_=a,H=[{type:j.CORNER,colors:[A,$,q]},{type:j.EDGE,colors:[A,q]},{type:j.CORNER,colors:[A,q,_]},{type:j.EDGE,colors:[A,_]},{type:j.CORNER,colors:[A,_,G]},{type:j.EDGE,colors:[A,G]},{type:j.CORNER,colors:[A,G,$]},{type:j.EDGE,colors:[A,$]}],X=[{type:j.EDGE,colors:[O,_]},{type:j.CORNER,colors:[O,_,q]},{type:j.EDGE,colors:[O,q]},{type:j.CORNER,colors:[O,q,$]},{type:j.EDGE,colors:[O,$]},{type:j.CORNER,colors:[O,$,G]},{type:j.EDGE,colors:[O,G]},{type:j.CORNER,colors:[O,G,_]}],Y=Math.sqrt(3),Z=Math.atan(B(15)),Q=B(30),V=B(60);class K{constructor(t=H,s=X,e=!1,i=.7){this.sideLength=i,this.halfSide=this.sideLength/2,this.halfEdgePiece=this.halfSide*Z,this.layerWidth=this.halfSide-this.halfEdgePiece,this.middleWidth=this.sideLength-2*this.layerWidth,this.halfMiddleWidth=this.middleWidth/2,this.borderLayerWidth=.2*this.sideLength,this.outerHalfSide=(i+this.borderLayerWidth)/2,this.outerHalfEdgePiece=this.outerHalfSide*Z,this.pieces=this.buildSquare1(t,s,e),this.group=new T(this.pieces)}makeLayer(t){let s=[],e=Math.PI;return t.forEach(((t,i)=>{switch(t.type){case j.CORNER:const i=this.square1Corner(t.colors[0],t.colors[1],t.colors[2]);i.rotate(e,[0,0,1]),s.push(i),e-=V;break;case j.EDGE:const r=this.square1Edge(t.colors[0],t.colors[1]);r.rotate(e-V,[0,0,1]),s.push(r),e-=Q}})),s}setColors(t){}}class J extends K{square1Corner(t,s,e){const i=[[0,0,0],[this.halfSide,this.halfEdgePiece,0],[this.halfSide,this.halfSide,0],[this.halfEdgePiece,this.halfSide,0],[this.outerHalfSide,this.outerHalfEdgePiece,0],[this.outerHalfSide,this.outerHalfSide,0],[this.outerHalfEdgePiece,this.outerHalfSide,0]],r=[new v([0,1,2,3],i,t),new v([2,3,6,5],i,s),new v([1,2,5,4],i,e)];return new x(i,r)}square1Edge(t,s){const e=[R(m(),[0,0,0],[0,0,0],Q),R(m(),[this.halfEdgePiece,this.halfSide,0],[0,0,0],Q),R(m(),[-this.halfEdgePiece,this.halfSide,0],[0,0,0],Q),R(m(),[this.outerHalfEdgePiece,this.outerHalfSide,0],[0,0,0],Q),R(m(),[-this.outerHalfEdgePiece,this.outerHalfSide,0],[0,0,0],Q)],i=[new v([0,1,2],e,t),new v([1,2,4,3],e,s)];return new x(e,i)}square1Middle(t,s,e,i){const r=this.halfSide-this.halfEdgePiece,h=(this.sideLength-2*r)/2,o=this.outerHalfSide-this.outerHalfEdgePiece,a=[[-this.outerHalfSide,h,-.01],[-this.outerHalfEdgePiece,h,-.01],[this.outerHalfSide,h,-.01],[-this.outerHalfSide,-h,-.01],[-this.outerHalfEdgePiece,-h,-.01],[this.outerHalfSide,-h,-.01],[2*this.outerHalfEdgePiece,h,-.01],[2*this.outerHalfEdgePiece,-h,-.01],[2*o,h,-.01],[2*o,-h,-.01]],n=[new v([0,1,4,3],a,t)];return i?(n.push(new v([1,6,7,4],a,e)),n.push(new v([6,8,9,7],a,s))):n.push(new v([1,2,5,4],a,t)),new x(a,n)}buildSquare1(t,s,e){const i=this.halfSide-this.halfEdgePiece,r=(this.sideLength-2*i)/2;let h=[];const o=new T(this.makeLayer(t)),a=new T(this.makeLayer(s));o.translate([0,this.outerHalfSide+r,0]),a.translate([0,-(this.outerHalfSide+r),0]),a.rotate(Q,[0,0,1]),h=[o,a];const n=this.square1Middle($,G,_,e);return h.push(n),h}}class tt{constructor(){this.stickers=new Map,this.faces=new Map,this.turns=new Map}addFace(t,s){if(s&&this.faces.has(s))throw`Face ${s} already exists`;s||(s=(this.faces.size+1).toString());const e=t.reduce(((t,s)=>{const e=(this.stickers.size+1).toString();return this.stickers.set(e,s),t.push(e),t}),[]);return this.faces.set(s,e),{faceId:s,stickerIds:e}}addTurn(t,s){if(s&&this.turns.has(s))throw`Turn ${s} already exists`;return s||(s=(this.turns.size+1).toString()),this.turns.set(s,t),s}doTurn(t,s=!1){const e=this.turns.get(t);if(!e)throw`Unknown turn ${t}`;let i=s?1:0,r=s?0:1,h={};e.forEach((t=>{h[t[r]]=this.stickers.get(t[r]),this.stickers.set(t[r],h[t[i]]||this.stickers.get(t[i]))}))}isSolved(){const t=this.faces.entries();let s=t.next();do{const e=s.value[1];let i=this.stickers.get(e[0]);for(let t of e)if(i!=this.stickers.get(t))return!1;s=t.next()}while(!s.done);return!0}getValues(){let t={};return this.faces.forEach(((s,e)=>{t[e]=s.map((t=>this.stickers.get(t)))})),t}setValue(t,s,e){if(!this.faces.has(t))return void console.warn(`attempting to set sticker value on invalid face: ${t}`);let i=this.faces.get(t),r=i[s];i?(console.log(r,e),this.stickers.set(r,e)):console.warn(`attempting to set sticker value for invalid sticker: ${t} ${s}`)}alg(t){t&&t.split(" ").forEach((t=>this.doTurn(t)))}case(t){}}const st=/(\/|\((-?\d),(-?\d)\))/g;function et(t){let s,e=[];for(;s=st.exec(t);)"/"===s[0]?e.push({slice:!0}):e.push({top:parseInt(s[2]),bottom:parseInt(s[3])});return e}const it={[j.CORNER]:2,[j.EDGE]:1};class rt extends tt{constructor(){super(),this.topLayer=JSON.parse(JSON.stringify(H)),this.bottomLayer=JSON.parse(JSON.stringify(X)),this.middleRotated=!1}alg(t){et(t).forEach((t=>{"slice"in t?this.slice():(this.rotateTop(t.top),this.rotateBottom(t.bottom))}))}case(t){et(t).reverse().forEach((t=>{"slice"in t?this.slice():(this.rotateTop(-1*t.top),this.rotateBottom(-1*t.bottom))}))}slice(){let t=0,s=0;for(let s=this.topLayer.length,e=0;s>0&&e<6;s--)e+=it[this.topLayer[s-1].type],t++;for(let t=this.bottomLayer.length,e=0;t>0&&e<6;t--)e+=it[this.bottomLayer[t-1].type],s++;const e=this.topLayer.splice(this.topLayer.length-t,this.topLayer.length),i=this.bottomLayer.splice(this.bottomLayer.length-s,this.bottomLayer.length);this.topLayer=this.topLayer.concat(i),this.bottomLayer=this.bottomLayer.concat(e),this.middleRotated=!this.middleRotated}rotateTop(t){for(;0!=t;)if(t<0){const s=this.topLayer.shift(),e=it[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.topLayer.push(s),t+=e}else{const s=this.topLayer.pop(),e=it[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.topLayer.unshift(s),t-=e}}rotateBottom(t){for(;0!=t;)if(t<0){const s=this.bottomLayer.shift(),e=it[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.bottomLayer.push(s),t+=e}else{const s=this.bottomLayer.pop(),e=it[s.type];if(Math.abs(t)<e)throw"Invalid Square1 Move";this.bottomLayer.unshift(s),t-=e}}}class ht extends K{constructor(t=H,s=X,e=!1,i=1.25){super(t,s,e,i),this.group.rotate(-.985398,[1,0,0]),this.group.rotate(-.59,[0,0,1])}square1Corner(t,s,e){const i=[[0,0,this.halfSide],[this.halfSide,this.halfEdgePiece,this.halfSide],[this.halfSide,this.halfSide,this.halfSide],[this.halfEdgePiece,this.halfSide,this.halfSide],[0,0,this.halfSide-this.layerWidth],[this.halfSide,this.halfEdgePiece,this.halfSide-this.layerWidth],[this.halfSide,this.halfSide,this.halfSide-this.layerWidth],[this.halfEdgePiece,this.halfSide,this.halfSide-this.layerWidth]],r=[new v([0,1,2,3],i,t),new v([2,3,7,6],i,s),new v([1,2,6,5],i,e)];return new x(i,r)}square1Edge(t,s){const e=[R(m(),[0,0,this.halfSide],[0,0,0],Q),R(m(),[this.halfEdgePiece,this.halfSide,this.halfSide],[0,0,0],Q),R(m(),[-this.halfEdgePiece,this.halfSide,this.halfSide],[0,0,0],Q),R(m(),[0,0,this.halfSide-this.layerWidth],[0,0,0],Q),R(m(),[this.halfEdgePiece,this.halfSide,this.halfSide-this.layerWidth],[0,0,0],Q),R(m(),[-this.halfEdgePiece,this.halfSide,this.halfSide-this.layerWidth],[0,0,0],Q)],i=[new v([0,1,2],e,t),new v([1,2,5,4],e,s)];return new x(e,i)}square1Middle(t,s,e){const i=[[-this.halfSide,-this.halfSide,this.halfMiddleWidth],[-this.halfSide,this.halfSide,this.halfMiddleWidth],[this.halfEdgePiece,this.halfSide,this.halfMiddleWidth],[-this.halfEdgePiece,-this.halfSide,this.halfMiddleWidth],[-this.halfSide,-this.halfSide,-this.halfMiddleWidth],[-this.halfSide,this.halfSide,-this.halfMiddleWidth],[this.halfEdgePiece,this.halfSide,-this.halfMiddleWidth],[-this.halfEdgePiece,-this.halfSide,-this.halfMiddleWidth]],r=[new v([0,1,2,3],i,{value:"#333"}),new v([4,5,6,7],i,{value:"#333"}),new v([0,1,5,4],i,s),new v([1,2,6,5],i,e),new v([2,3,7,6],i,{value:"#333"}),new v([0,3,7,4],i,t)];return new x(i,r)}buildSquare1(t,s,e){const i=new T(this.makeLayer(t)),r=new T(this.makeLayer(s));i.translate([0,0,.005]),r.translate([0,0,-.005]),r.rotate(Math.PI,[1,0,0]),r.rotate(Q,[0,0,1]);const h=[i,r],o=this.square1Middle($,q,_),a=this.square1Middle(_,G,$);return a.rotate(Math.PI,[0,0,1]),e&&a.rotate(Math.PI,W),h.push(o),h.push(a),h}}class ot extends x{constructor(t,s,e){let i=[S([0,0,0]),S([t,0,0]),S([t,-s,0]),S([0,-s,0])];super(i,[new v([0,1,2,3],i,e)])}}class at extends x{constructor(t,s,e,i){let r=[t,s,e];super(r,[new v([0,1,2],r,i)])}}class nt{constructor(){const t=Math.sqrt(2*Math.pow(.5,2)),s=new T(this.makeStickers(r,t,[-1,0,0])),e=new T(this.makeStickers(i,t,[2,0,0])),c=new T(this.makeStickers(h,t,[0,-1,0])),l=new T(this.makeStickers(a,t,[1,0,0])),u=new T(this.makeStickers(n,t,[0,1,0])),d=new T(this.makeStickers(o,t,[0,0,0]));this.U=u,this.R=l,this.F=d,this.L=s,this.B=e,this.D=c,this.stickers=[s,e,c,l,u,d],this.group=new T(this.stickers),this.group.translate([-1/4,0,0]),this.group.scale([.5,.5,.5])}makeStickers(t,s,e){const i=new ot(s,s,t);i.translate(e),i.rotate(Math.PI/4,[0,0,1]),i.translate([-s/2,s/2,0]);const r=[];for(let i=0;i<4;i++){const h=new at([-s/2,s/2,0],[0,s,0],[s/2,s/2,0],t);h.translate(e),h.rotate(-Math.PI/2*i,[0,0,1]),h.rotate(Math.PI/4,[0,0,1]),r.push(h)}return[i,...r]}setColors(t){let{top:s,right:e,front:i,bottom:r,left:h,back:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}setFaceColors(t,s=[]){t.objects[0].faces[0].color=s[0]||w,t.objects[1].faces[0].color=s[1]||w,t.objects[2].faces[0].color=s[2]||w,t.objects[3].faces[0].color=s[4]||w,t.objects[4].faces[0].color=s[3]||w}}var ct;!function(t){t[t.Clockwise=0]="Clockwise",t[t.CounterClockwise=1]="CounterClockwise",t[t.Double=2]="Double"}(ct||(ct={}));const lt=/([LRUB])(\'?)/g,ut={"":ct.Clockwise,"'":ct.CounterClockwise};function dt(t){let s,e=[];for(;s=lt.exec(t);){const t=s[1],i=s[2];e.push({unit:t,turnType:ut[i],slices:1})}return e}function ft(t,s){return new Array(t).fill(s)}class pt extends tt{constructor(){super();const{stickerIds:t}=this.addFace(ft(5,"top"),"top"),{stickerIds:s}=this.addFace(ft(5,"front"),"front"),{stickerIds:e}=this.addFace(ft(5,"right"),"right"),{stickerIds:i}=this.addFace(ft(5,"bottom"),"bottom"),{stickerIds:r}=this.addFace(ft(5,"back"),"back"),{stickerIds:h}=this.addFace(ft(5,"left"),"left");this.addTurn([[e[0],r[0]],[e[2],r[4]],[e[3],r[1]],[e[4],r[3]],[r[0],i[0]],[r[4],i[2]],[r[1],i[3]],[r[3],i[4]],[i[0],e[0]],[i[2],e[2]],[i[3],e[3]],[i[4],e[4]],[s[4],t[2]],[t[2],h[3]],[h[3],s[4]]],"R"),this.addTurn([[wt(t),wt(h)],[bt(t),bt(h)],[gt(t),gt(h)],[Ct(t),Ct(h)],[wt(h),wt(r)],[bt(h),gt(r)],[gt(h),kt(r)],[Ct(h),bt(r)],[wt(r),wt(t)],[gt(r),bt(t)],[kt(r),gt(t)],[bt(r),Ct(t)],[gt(e),bt(s)],[bt(s),Ct(i)],[Ct(i),gt(e)]],"U"),this.addTurn([[wt(h),wt(s)],[Ct(h),bt(s)],[gt(h),kt(s)],[kt(h),Ct(s)],[wt(s),wt(i)],[bt(s),gt(i)],[kt(s),Ct(i)],[Ct(s),bt(i)],[wt(i),wt(h)],[gt(i),Ct(h)],[Ct(i),gt(h)],[bt(i),kt(h)],[kt(r),Ct(t)],[Ct(t),Ct(e)],[Ct(e),kt(r)]],"L"),this.addTurn([[wt(r),wt(h)],[gt(r),kt(h)],[Ct(r),bt(h)],[kt(r),Ct(h)],[wt(h),wt(i)],[kt(h),kt(i)],[bt(h),bt(i)],[Ct(h),Ct(i)],[wt(i),wt(r)],[kt(i),gt(r)],[bt(i),Ct(r)],[Ct(i),kt(r)],[bt(t),Ct(s)],[Ct(s),kt(e)],[kt(e),bt(t)]],"B")}R(t){this.doTurn("R",t)}U(t){this.doTurn("U",t)}L(t){this.doTurn("L",t)}B(t){this.doTurn("B",t)}alg(t){t&&this.doTurns(dt(t))}case(t){if(!t)return;let s=dt(t).reverse().map((t=>Object.assign(Object.assign({},t),{turnType:t.turnType===ct.Clockwise?ct.CounterClockwise:ct.Clockwise})));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s=t.turnType===ct.CounterClockwise;switch(t.unit){case"R":this.R(s);break;case"U":this.U(s);break;case"L":this.L(s);break;case"B":this.B(s)}}))}}const wt=t=>t[0],bt=t=>t[1],gt=t=>t[2],Ct=t=>t[3],kt=t=>t[4];class Ft{constructor(){const t=Math.sqrt(2*Math.pow(.625,2)),s=.625,e=new T(this.makeStickers(r,t)),c=new T(this.makeStickers(i,t,[1,0,0])),l=new T(this.makeStickers(h,t,[0,1,0])),u=new T(this.makeStickers(a,t)),d=new T(this.makeStickers(n,t,[0,1,0])),f=new T(this.makeStickers(o,t,[1,0,0]));this.U=c,this.R=e,this.F=l,this.L=u,this.B=d,this.D=f,e.translate([0,0,s]),e.rotate(Math.PI,[1,0,0]),e.rotate(Math.PI/2,[0,0,1]),u.rotate(-Math.PI/2,[0,0,1]),u.translate([0,0,-.625]),l.rotate(-Math.PI/2,[1,0,0]),l.translate([-.625,0,0]),d.translate([s,0,0]),d.rotate(Math.PI,[0,1,0]),d.rotate(-Math.PI/2,[1,0,0]),c.rotate(Math.PI,[0,1,0]),c.translate([0,s,0]),f.translate([0,-.625,0]),f.rotate(Math.PI,[1,0,0]),this.stickers=[e,c,l,u,d,f],this.group=new T(this.stickers),this.group.rotate(.593411946,[1,0,0]),this.group.rotate(.785398,[0,1,0])}makeStickers(t,s,e){const i=new ot(s,s,t);e&&i.rotate(Math.PI/2,e),i.rotate(Math.PI/4,[0,0,1]),i.translate([-s/2,s/2,0]);const r=[];for(let i=0;i<4;i++){const h=new at([-s/2,s/2,0],[0,s,0],[s/2,s/2,0],t);e&&h.rotate(Math.PI/2,e),h.rotate(Math.PI/2*i,[0,0,1]),h.rotate(Math.PI/4,[0,0,1]),r.push(h)}return[i,...r]}setColors(t){let{top:s,right:e,front:i,bottom:r,left:h,back:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}setFaceColors(t,s=[]){t.objects[0].faces[0].color=s[0]||w,t.objects[1].faces[0].color=s[1]||w,t.objects[2].faces[0].color=s[2]||w,t.objects[3].faces[0].color=s[4]||w,t.objects[4].faces[0].color=s[3]||w}}const Et=/([LlRrUuBb])(\'?)/g,yt={"":ct.Clockwise,"'":ct.CounterClockwise};function Mt(t){let s,e=[];for(;s=Et.exec(t);){const t=s[1],i=s[2];e.push({unit:t,turnType:yt[i],slices:1})}return e}class mt extends tt{constructor(){super();const{stickerIds:t}=this.addFace(ft(9,"top"),"top"),{stickerIds:s}=this.addFace(ft(9,"left"),"left"),{stickerIds:e}=this.addFace(ft(9,"right"),"right"),{stickerIds:i}=this.addFace(ft(9,"back"),"back");this.addTurn([[t[8],e[8]],[e[8],s[8]],[s[8],t[8]]],"u"),this.addTurn([[s[0],i[8]],[i[8],t[4]],[t[4],s[0]]],"l"),this.addTurn([[s[4],e[0]],[e[0],i[4]],[i[4],s[4]]],"r"),this.addTurn([[e[4],t[0]],[t[0],i[0]],[i[0],e[4]]],"b"),this.addTurn([[t[5],e[5]],[t[6],e[6]],[t[7],e[7]],[t[8],e[8]],[e[5],s[5]],[e[6],s[6]],[e[7],s[7]],[e[8],s[8]],[s[5],t[5]],[s[6],t[6]],[s[7],t[7]],[s[8],t[8]]],"U"),this.addTurn([[s[0],i[8]],[s[1],i[6]],[s[2],i[5]],[s[5],i[7]],[i[8],t[4]],[i[6],t[3]],[i[5],t[7]],[i[7],t[2]],[t[4],s[0]],[t[3],s[1]],[t[7],s[2]],[t[2],s[5]]],"L"),this.addTurn([[s[2],e[5]],[s[3],e[1]],[s[4],e[0]],[s[7],e[2]],[e[5],i[2]],[e[1],i[3]],[e[0],i[4]],[e[2],i[7]],[i[2],s[2]],[i[3],s[3]],[i[4],s[4]],[i[7],s[7]]],"R"),this.addTurn([[e[2],t[5]],[e[3],t[1]],[e[4],t[0]],[e[7],t[2]],[t[5],i[5]],[t[1],i[1]],[t[0],i[0]],[t[2],i[2]],[i[5],e[2]],[i[1],e[3]],[i[0],e[4]],[i[2],e[7]]],"B")}U(t){this.doTurn("U",t)}R(t){this.doTurn("R",t)}L(t){this.doTurn("L",t)}B(t){this.doTurn("B",t)}u(t){this.doTurn("u",t)}r(t){this.doTurn("r",t)}l(t){this.doTurn("l",t)}b(t){this.doTurn("b",t)}alg(t){t&&this.doTurns(Mt(t))}case(t){if(!t)return;let s=Mt(t).reverse().map((t=>Object.assign(Object.assign({},t),{turnType:t.turnType===ct.Clockwise?ct.CounterClockwise:ct.Clockwise})));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s=t.turnType===ct.CounterClockwise;switch(t.unit){case"R":this.R(s);break;case"r":this.r(s);break;case"U":this.U(s);break;case"u":this.u(s);break;case"L":this.L(s);break;case"l":this.l(s);break;case"B":this.B(s);break;case"b":this.b(s)}}))}}class St extends x{constructor(t,s,e){const i=t/2,r=t*(Y/2),h=t/s,o=r/s,a=r/3;let n=[],c=[],l=0;for(let t=0;t<=s;t++)for(let r=0,u=s-t;r<=u;r++){const s=h*r+t*h/2-i,d=o*t-a;n.push([s,d,0]),t>0&&(r>0&&c.push(new v([l,l-1,l-u-2],null,e)),c.push(new v([l,l-u-2,l-u-1],null,e))),l++}c.forEach((t=>t.calculateCentroid(n))),super(n,c)}}const Rt=60*Math.PI/180;class Lt{constructor(t,s=.925){this.size=t;const e=s*(Y/2)/1.5,o=new St(s,t,i),a=new St(s,t,n),c=new St(s,t,h),l=new St(s,t,r);this.L=c,this.R=a,this.U=o,this.B=l,a.rotate(-Rt,[0,0,1]),a.translate([0,e,0]),a.rotate(2*Rt,[0,0,1]),o.rotate(Rt,[0,0,1]),o.translate([0,e,0]),o.rotate(-2*Rt,[0,0,1]),l.rotate(3*Rt,[0,0,1]),l.translate([0,e,0]),l.rotate(-2*Rt,[0,0,1]),this.faces=[o,a,c,l],this.group=new T(this.faces)}setColors(t){let{left:s,right:e,top:i,back:r}=t;this.setFaceColors(this.L,s),this.setFaceColors(this.R,e),this.setFaceColors(this.U,i),this.setFaceColors(this.B,r)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=w}))}}class Tt extends x{constructor(t,s=2,e=1.6,i=.4){const r=function(t){return t/(2*Math.sin(Math.PI/5))}(e),h=function(t){const s=t*t,e=71*Math.PI/180,i=2*s-2*s*Math.cos(e);return 2*Math.sqrt(Math.abs(s-i))}(i),o=function(t,s,e,i){let r=[];for(let h=0;h<t;h++){const t=s+e*h;r=[...r,...Ut(h,t,i)]}return r}(s,r-h*(s-1),h,i);super(o,function(t,s,e){let i=[];const r=new v([0,1,2,3,4],e,s);i.push(r);let h=5,o=5;for(let r=1;r<t;r++){const t=5+10*r;h+=t;const a=Bt(r),n=Pt(r-1),c=Pt(r);for(;o<h;){const r=o-(n[n.length-1]+1);if(r%(t/5)==0){o++;continue}const h=(r+1)%(t/5)==0;let l=o,u=c[(r+1)%c.length],d=h?u+1:a.shift(),f=h?a.shift():n[(n.indexOf(d)-1+n.length)%n.length];o++,i.push(new v([l,u,d,f],e,s))}}return i}(s,t,o))}}function Bt(t){if(t<1)return[];let s=[];const e=5+10*(t-1);let i=5*(t-1)*(t-1);for(let t=0;t<e;t++)s.push(t+i),t%(e/5)==0&&s.push(t+i);return s.push(s.shift()),s.push(s.shift()),s}function Pt(t){let s=5*t*t,e=[];for(let i=0,r=5+10*t;i<r;i++)e.push(i+s);return e}function It(t,s,e,i){if(0===e)return[[t[0],t[1],0],[s[0],s[1],0]];const r=function(t,s){return Math.sqrt(Math.pow(s[1]-t[1],2)+Math.pow(s[0]-t[0],2))}(t,s);let h=[];for(let o=e;o>0;o--){let e=[t[0]+(s[0]-t[0])/r*i*o,t[1]+(s[1]-t[1])/r*i*o,0];h.unshift(e);let a=[s[0]+(t[0]-s[0])/r*i*o,s[1]+(t[1]-s[1])/r*i*o,0];h.push(a)}return h.unshift([t[0],t[1],0]),h.push([s[0],s[1],0]),h}function Ut(t,s,e){let i=[];for(let r=0;r<5;r++){const h=P(s,r*(2*Math.PI)/5-Math.PI/10);if(i.length>0){const s=i[i.length-1],r=It([s[0],s[1]],h,t,e);r.shift(),i=i.concat(r)}else i.push([h[0],h[1],0])}const r=i[0],h=i[i.length-1],o=It([h[0],h[1]],[r[0],r[1]],t,e);return o.pop(),o.shift(),i=i.concat(o),i}const vt=36*Math.PI/180,xt=72*Math.PI/180,Dt={2:.3,3:.17,4:.121};class zt{constructor(t){this.layers=t;const s=.75,e=function(t,s){return Dt[s]||t/(1.9*s)}(length,t);this.U=new Tt(o,t,s,e),this.F=new Tt(r,t,s,e),this.L=new Tt(n,t,s,e),this.BL=new Tt(c,t,s,e),this.BR=new Tt(i,t,s,e),this.R=new Tt(h,t,s,e),this.d=new Tt(l,t,s,e),this.bl=new Tt(u,t,s,e),this.dl=new Tt(d,t,s,e),this.dr=new Tt(p,t,s,e),this.br=new Tt(f,t,s,e),this.b=new Tt(a,t,s,e);const w=.75/(2*Math.tan(Math.PI/5))*2;this.F.translate([0,w,0]),this.F.rotate(5*vt,[0,0,1]),this.L.rotate(-xt,[0,0,1]),this.L.translate([0,w,0]),this.L.rotate(3*vt,[0,0,1]),this.BL.rotate(-2*xt,[0,0,1]),this.BL.translate([0,w,0]),this.BL.rotate(-vt,[0,0,1]),this.BR.rotate(2*xt,[0,0,1]),this.BR.translate([0,w,0]),this.BR.rotate(vt,[0,0,1]),this.R.rotate(xt,[0,0,1]),this.R.translate([0,w,0]),this.R.rotate(-3*vt,[0,0,1]),this.d.rotate(Math.PI,[0,0,1]),this.d.rotate(-2*vt,[0,0,1]),this.b.rotate(3*vt,[0,0,1]),this.b.translate([0,w,0]),this.b.rotate(5*vt,[0,0,1]),this.bl.rotate(vt,[0,0,1]),this.bl.translate([0,w,0]),this.bl.rotate(3*vt,[0,0,1]),this.dl.rotate(-vt,[0,0,1]),this.dl.translate([0,w,0]),this.dl.rotate(-vt,[0,0,1]),this.dr.rotate(-3*vt,[0,0,1]),this.dr.translate([0,w,0]),this.dr.rotate(vt,[0,0,1]),this.br.rotate(5*vt,[0,0,1]),this.br.translate([0,w,0]),this.br.rotate(-3*vt,[0,0,1]);const b=new T([this.U,this.F,this.L,this.BL,this.BR,this.R]),g=new T([this.d,this.bl,this.dr,this.dl,this.br,this.b]);g.rotate(-xt,[0,0,1]),g.translate([0,2*w,0]),g.rotate(2*xt,[0,0,1]),g.translate([0,-w,0]),this.group=new T([b,g]),this.group.scale([.33,.33,.33]),this.group.translate([-1.3125,0,0])}setColors(t){let{U:s,R:e,F:i,d:r,L:h,b:o,dr:a,dl:n,br:c,BR:l,BL:u,bl:d}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.d,r),this.setFaceColors(this.L,h),this.setFaceColors(this.b,o),this.setFaceColors(this.dr,a),this.setFaceColors(this.dl,n),this.setFaceColors(this.BR,l),this.setFaceColors(this.BL,u),this.setFaceColors(this.bl,d),this.setFaceColors(this.br,c)}oldSetColors(t){const s=this.layers,e=5*s*s-5*s+1;let[i,r,h,o,a,n,c,l,u,d,f,p]=function(t,s){const e=Math.ceil(t.length/s);return new Array(e).fill(null).map(((e,i)=>t.slice(i*s,(i+1)*s)))}(t,e);this.setFaceColors(this.U,i),this.setFaceColors(this.R,r),this.setFaceColors(this.F,h),this.setFaceColors(this.d,c),this.setFaceColors(this.L,n),this.setFaceColors(this.b,p),this.setFaceColors(this.dr,o),this.setFaceColors(this.dl,a),this.setFaceColors(this.br,l),this.setFaceColors(this.BR,u),this.setFaceColors(this.BL,d),this.setFaceColors(this.bl,f)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=w}))}}const Nt={2:.3,3:.17,4:.121};class jt{constructor(t=2){this.layers=t;const s=.75,e=.375*Math.sqrt(2.5+1.1*Math.sqrt(5)),w=function(t,s){return Nt[s]||.75/(1.9*s)}(0,t);this.U=new Tt(o,t,s,w),this.F=new Tt(r,t,s,w),this.R=new Tt(h,t,s,w),this.dr=new Tt(p,t,s,w),this.dl=new Tt(d,t,s,w),this.L=new Tt(n,t,s,w),this.d=new Tt(l,t,s,w),this.br=new Tt(f,t,s,w),this.BR=new Tt(i,t,s,w),this.BL=new Tt(c,t,s,w),this.bl=new Tt(u,t,s,w),this.b=new Tt(a,t,s,w),this.F.translate([0,0,e]),this.b.rotate(Math.PI,[0,0,1]),this.b.rotate(Math.PI,[0,1,0]),this.b.translate([0,0,e]),this.U.rotate(Math.PI,[0,0,1]),this.U.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.U.translate([0,0,e]),this.L.rotate(72*Math.PI/180,[0,0,1]),this.L.rotate(Math.PI,[0,0,1]),this.L.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.L.translate([0,0,e]),this.R.rotate(72*Math.PI/180,[0,0,1]),this.R.rotate(Math.PI/5,[0,0,1]),this.R.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.R.translate([0,0,e]),this.dr.rotate(72*Math.PI/180,[0,0,1]),this.dr.rotate(-Math.PI/5,[0,0,1]),this.dr.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.dr.translate([0,0,e]),this.dl.rotate(72*Math.PI/180,[0,0,1]),this.dl.rotate(-3*Math.PI/5,[0,0,1]),this.dl.rotate((180-116.57)*Math.PI/180,[1,0,0]),this.dl.translate([0,0,e]),this.BL.rotate(Math.PI/5,[0,0,1]),this.BL.rotate(-116.57*Math.PI/180,[1,0,0]),this.BL.translate([0,0,e]),this.BR.rotate(-Math.PI/5,[0,0,1]),this.BR.rotate(-116.57*Math.PI/180,[1,0,0]),this.BR.translate([0,0,e]),this.bl.rotate(3*Math.PI/5,[0,0,1]),this.bl.rotate(-116.57*Math.PI/180,[1,0,0]),this.bl.translate([0,0,e]),this.d.rotate(5*Math.PI/5,[0,0,1]),this.d.rotate(-116.57*Math.PI/180,[1,0,0]),this.d.translate([0,0,e]),this.br.rotate(7*Math.PI/5,[0,0,1]),this.br.rotate(-116.57*Math.PI/180,[1,0,0]),this.br.translate([0,0,e]),this.stickers=[this.U,this.F,this.R,this.dr,this.dl,this.L,this.d,this.br,this.BR,this.BL,this.bl,this.b],this.group=new T(this.stickers)}setColors(t){let{U:s,R:e,F:i,d:r,L:h,b:o,dr:a,dl:n,br:c,BR:l,BL:u,bl:d}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.d,r),this.setFaceColors(this.L,h),this.setFaceColors(this.b,o),this.setFaceColors(this.dr,a),this.setFaceColors(this.dl,n),this.setFaceColors(this.BR,l),this.setFaceColors(this.BL,u),this.setFaceColors(this.bl,d),this.setFaceColors(this.br,c)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=w}))}}const Wt=["U","R","F","dr","dl","L","d","br","BR","BL","bl","b"],At=/([RD])(\+\+|\-\-)|(U)(\'?)/g;var Ot;!function(t){t.Clockwise="++",t.CounterClockwise="--",t.UClockwise="",t.UCounter="'"}(Ot||(Ot={}));const $t={[Ot.Clockwise]:ct.Clockwise,[Ot.CounterClockwise]:ct.CounterClockwise,[Ot.UClockwise]:ct.Clockwise,[Ot.UCounter]:ct.CounterClockwise};function qt(t){if(!t)return[];let s,e=[];for(;s=At.exec(t);){const t=s[1]||s[3],i=s[2]||s[4];e.push({unit:t,turnType:$t[i],slices:1})}return e}class Gt extends tt{constructor(){super(),Wt.forEach((t=>{this.addFace(ft(11,t),t)}));const t=this.faces.get("U"),s=this.faces.get("R"),e=this.faces.get("F"),i=this.faces.get("dr"),r=this.faces.get("dl"),h=this.faces.get("L"),o=this.faces.get("d"),a=this.faces.get("br"),n=this.faces.get("BR"),c=this.faces.get("BL"),l=this.faces.get("bl"),u=this.faces.get("b");this.addTurn([[e[2],t[6]],[e[1],t[5]],[e[10],t[4]],[t[6],n[10]],[t[5],n[9]],[t[4],n[8]],[n[10],a[8]],[n[9],a[7]],[n[8],a[6]],[a[8],i[2]],[a[7],i[1]],[a[6],i[10]],[i[2],e[2]],[i[1],e[1]],[i[10],e[10]],..._t(s)],"R"),this.addTurn([[t[2],s[2]],[t[3],s[3]],[t[4],s[4]],[s[2],i[2]],[s[3],i[3]],[s[4],i[4]],[i[2],r[2]],[i[3],r[3]],[i[4],r[4]],[r[2],h[2]],[r[3],h[3]],[r[4],h[4]],[h[2],t[2]],[h[3],t[3]],[h[4],t[4]],..._t(e)],"F"),this.addTurn([[e[2],h[4]],[e[3],h[5]],[e[4],h[6]],[h[4],c[8]],[h[5],c[9]],[h[6],c[10]],[c[8],n[6]],[c[9],n[7]],[c[10],n[8]],[n[6],s[10]],[n[7],s[1]],[n[8],s[2]],[s[10],e[2]],[s[1],e[3]],[s[2],e[4]],..._t(t)],"U"),this.addTurn([[e[4],r[4]],[e[5],r[5]],[e[6],r[6]],[r[4],l[8]],[r[5],l[9]],[r[6],l[10]],[l[8],c[6]],[l[9],c[7]],[l[10],c[8]],[c[6],t[10]],[c[7],t[1]],[c[8],t[2]],[t[10],e[4]],[t[1],e[5]],[t[2],e[6]],..._t(h)],"L"),this.addTurn([[t[6],c[10]],[t[7],c[1]],[t[8],c[2]],[c[10],u[8]],[c[1],u[9]],[c[2],u[10]],[u[8],a[4]],[u[9],a[5]],[u[10],a[6]],[a[4],s[8]],[a[5],s[9]],[a[6],s[10]],[s[8],t[6]],[s[9],t[7]],[s[10],t[8]],..._t(n)],"BR"),this.addTurn([[t[8],h[6]],[t[9],h[7]],[t[10],h[8]],[h[6],l[10]],[h[7],l[1]],[h[8],l[2]],[l[10],u[6]],[l[1],u[7]],[l[2],u[8]],[u[6],n[4]],[u[7],n[5]],[u[8],n[6]],[n[4],t[8]],[n[5],t[9]],[n[6],t[10]],..._t(c)],"BL"),this.addTurn([[e[8],s[4]],[e[9],s[5]],[e[10],s[6]],[s[4],a[8]],[s[5],a[9]],[s[6],a[10]],[a[8],o[6]],[a[9],o[7]],[a[10],o[8]],[o[6],r[10]],[o[7],r[1]],[o[8],r[2]],[r[10],e[8]],[r[1],e[9]],[r[2],e[10]],..._t(i)],"dr"),this.addTurn([[e[6],i[4]],[e[7],i[5]],[e[8],i[6]],[i[4],o[8]],[i[5],o[9]],[i[6],o[10]],[o[8],l[6]],[o[9],l[7]],[o[10],l[8]],[l[6],h[10]],[l[7],h[1]],[l[8],h[2]],[h[10],e[6]],[h[1],e[7]],[h[2],e[8]],..._t(r)],"dl"),this.addTurn([[a[10],u[2]],[a[1],u[3]],[a[2],u[4]],[u[2],l[4]],[u[3],l[5]],[u[4],l[6]],[l[4],r[8]],[l[5],r[9]],[l[6],r[10]],[r[8],i[6]],[r[9],i[7]],[r[10],i[8]],[i[6],a[10]],[i[7],a[1]],[i[8],a[2]],..._t(o)],"d"),this.addTurn([[u[10],o[4]],[u[1],o[5]],[u[2],o[6]],[o[4],i[8]],[o[5],i[9]],[o[6],i[10]],[i[8],s[6]],[i[9],s[7]],[i[10],s[8]],[s[6],n[10]],[s[7],n[1]],[s[8],n[2]],[n[10],u[10]],[n[1],u[1]],[n[2],u[2]],..._t(a)],"br"),this.addTurn([[c[4],h[8]],[c[5],h[9]],[c[6],h[10]],[h[8],r[6]],[h[9],r[7]],[h[10],r[8]],[r[6],o[10]],[r[7],o[1]],[r[8],o[2]],[o[10],u[4]],[o[1],u[5]],[o[2],u[6]],[u[4],c[4]],[u[5],c[5]],[u[6],c[6]],..._t(l)],"bl"),this.addTurn([[a[2],n[2]],[a[3],n[3]],[a[4],n[4]],[n[2],c[2]],[n[3],c[3]],[n[4],c[4]],[c[2],l[2]],[c[3],l[3]],[c[4],l[4]],[l[2],o[2]],[l[3],o[3]],[l[4],o[4]],[o[2],a[2]],[o[3],a[3]],[o[4],a[4]],..._t(u)],"b"),this.addTurn([[e[0],s[0]],[e[1],s[9]],[e[5],s[3]],[e[6],s[4]],[e[7],s[5]],[e[8],s[6]],[e[9],s[7]],[e[10],s[8]],[s[0],n[0]],[s[3],n[9]],[s[4],n[10]],[s[5],n[1]],[s[6],n[2]],[s[7],n[3]],[s[8],n[4]],[s[9],n[5]],[n[0],c[0]],[n[9],c[1]],[n[10],c[2]],[n[1],c[3]],[n[2],c[4]],[n[3],c[5]],[n[4],c[6]],[n[5],c[7]],[c[0],h[0]],[c[1],h[7]],[c[2],h[8]],[c[3],h[9]],[c[4],h[10]],[c[5],h[1]],[c[6],h[2]],[c[7],h[3]],[h[0],e[0]],[h[7],e[5]],[h[8],e[6]],[h[9],e[7]],[h[10],e[8]],[h[1],e[9]],[h[2],e[10]],[h[3],e[1]],[i[0],a[0]],[i[1],a[5]],[i[2],a[6]],[i[3],a[7]],[i[4],a[8]],[i[5],a[9]],[i[6],a[10]],[i[7],a[1]],[i[8],a[2]],[i[9],a[3]],[i[10],a[4]],[a[0],u[0]],[a[1],u[3]],[a[2],u[4]],[a[3],u[5]],[a[4],u[6]],[a[5],u[7]],[a[6],u[8]],[a[7],u[9]],[a[8],u[10]],[a[9],u[1]],[a[10],u[2]],[u[0],l[0]],[u[1],l[3]],[u[2],l[4]],[u[3],l[5]],[u[4],l[6]],[u[5],l[7]],[u[6],l[8]],[u[7],l[9]],[u[8],l[10]],[u[9],l[1]],[u[10],l[2]],[l[0],r[0]],[l[1],r[5]],[l[2],r[6]],[l[3],r[7]],[l[4],r[8]],[l[5],r[9]],[l[6],r[10]],[l[7],r[1]],[l[8],r[2]],[l[9],r[3]],[l[10],r[4]],[r[0],i[0]],[r[1],i[9]],[r[2],i[10]],[r[3],i[1]],[r[4],i[2]],[r[5],i[3]],[r[6],i[4]],[r[7],i[5]],[r[8],i[6]],[r[9],i[7]],[r[10],i[8]],..._t(o)],"D++"),this.addTurn([[e[0],t[0]],[e[7],t[3]],[e[8],t[4]],[e[9],t[5]],[e[10],t[6]],[e[1],t[7]],[e[2],t[8]],[e[3],t[9]],[t[0],c[0]],[t[3],c[9]],[t[4],c[10]],[t[5],c[1]],[t[6],c[2]],[t[7],c[3]],[t[8],c[4]],[t[9],c[5]],[c[0],l[0]],[c[9],l[1]],[c[10],l[2]],[c[1],l[3]],[c[2],l[4]],[c[3],l[5]],[c[4],l[6]],[c[5],l[7]],[l[0],r[0]],[l[1],r[7]],[l[2],r[8]],[l[3],r[9]],[l[4],r[10]],[l[5],r[1]],[l[6],r[2]],[l[7],r[3]],[r[0],e[0]],[r[7],e[7]],[r[8],e[8]],[r[9],e[9]],[r[10],e[10]],[r[1],e[1]],[r[2],e[2]],[r[3],e[3]],[i[0],s[0]],[i[1],s[9]],[i[2],s[10]],[i[3],s[1]],[i[4],s[2]],[i[5],s[3]],[i[6],s[4]],[i[7],s[5]],[i[8],s[6]],[i[9],s[7]],[i[10],s[8]],[s[0],n[0]],[s[1],n[5]],[s[2],n[6]],[s[3],n[7]],[s[4],n[8]],[s[5],n[9]],[s[6],n[10]],[s[7],n[1]],[s[8],n[2]],[s[9],n[3]],[s[10],n[4]],[n[0],u[0]],[n[1],u[1]],[n[2],u[2]],[n[3],u[3]],[n[4],u[4]],[n[5],u[5]],[n[6],u[6]],[n[7],u[7]],[n[8],u[8]],[n[9],u[9]],[n[10],u[10]],[u[0],o[0]],[u[1],o[5]],[u[2],o[6]],[u[3],o[7]],[u[4],o[8]],[u[5],o[9]],[u[6],o[10]],[u[7],o[1]],[u[8],o[2]],[u[9],o[3]],[u[10],o[4]],[o[0],i[0]],[o[1],i[5]],[o[2],i[6]],[o[3],i[7]],[o[4],i[8]],[o[5],i[9]],[o[6],i[10]],[o[7],i[1]],[o[8],i[2]],[o[9],i[3]],[o[10],i[4]],..._t(a)],"R++")}U(t){this.doTurn("U",t)}R(t){this.doTurn("R",t)}F(t){this.doTurn("F",t)}dr(t){this.doTurn("dr",t)}dl(t){this.doTurn("dl",t)}L(t){this.doTurn("L",t)}d(t){this.doTurn("d",t)}br(t){this.doTurn("br",t)}BR(t){this.doTurn("BR",t)}BL(t){this.doTurn("BL",t)}bl(t){this.doTurn("bl",t)}b(t){this.doTurn("b",t)}Dxx(t){this.doTurn("D++",t)}Rxx(t){this.doTurn("R++",t)}alg(t){t&&this.doTurns(qt(t))}case(t){if(!t)return;let s=qt(t).reverse().map((t=>Object.assign(Object.assign({},t),{turnType:t.turnType===ct.Clockwise?ct.CounterClockwise:ct.Clockwise})));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s=t.turnType===ct.CounterClockwise;switch(t.unit){case"R":this.Rxx(s);break;case"D":this.Dxx(s);break;case"U":this.U(s)}}))}}function _t(t){return[[t[1],t[9]],[t[9],t[7]],[t[7],t[5]],[t[5],t[3]],[t[3],t[1]],[t[2],t[10]],[t[10],t[8]],[t[8],t[6]],[t[6],t[4]],[t[4],t[2]]]}class Ht{constructor(t){this.size=t;const s=D(1,t,i),e=D(1,t,r),c=D(1,t,h),l=D(1,t,o),u=D(1,t,a),d=D(1,t,n);this.U=new T(s),this.U.translate([0,1,0]),this.R=new T(e),this.R.translate([1,0,0]),this.F=new T(c),this.D=new T(l),this.D.translate([0,-1,0]),this.L=new T(u),this.L.translate([-1,0,0]),this.B=new T(d),this.B.translate([2,0,0]),this.stickers=[this.U,this.R,this.F,this.D,this.L,this.B],this.group=new T(this.stickers),this.group.translate([-1/4,0,0]),this.group.scale([.5,.5,.5])}setFaceColors(t,s){t.objects.forEach(((t,e)=>{s&&s[e]?t.faces[0].color=s[e]:t.faces[0].color=w}))}setColors(t){let{U:s,R:e,F:i,D:r,L:h,B:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}}class Xt{constructor(t){this.size=t;const s=1.5,e=.75;this.U=new T(D(s,t,i)),this.R=new T(D(s,t,r)),this.F=new T(D(s,t,h)),this.D=new T(D(s,t,o)),this.L=new T(D(s,t,a)),this.B=new T(D(s,t,n)),this.U.rotate(-Math.PI/2,[0,1,0]),this.U.rotate(-Math.PI/2,[1,0,0]),this.U.translate([0,0,e]),this.R.translate([0,0,e]),this.F.rotate(-Math.PI/2,[0,1,0]),this.F.translate([0,0,e]),this.D.rotate(-Math.PI/2,[0,1,0]),this.D.rotate(Math.PI/2,[1,0,0]),this.D.translate([0,0,e]),this.L.rotate(-Math.PI,[0,1,0]),this.L.translate([0,0,e]),this.B.rotate(Math.PI/2,[0,1,0]),this.B.translate([0,0,e]),this.stickers=[this.U,this.R,this.F,this.D,this.L,this.B],this.group=new T(this.stickers),this.group.translate([0,0,-1]),this.group.rotate(.593411946,[1,0,0]),this.group.rotate(.785398,[0,1,0])}setFaceColors(t,s){t.objects.forEach(((t,e)=>{s&&s[e]?t.faces[0].color=s[e]:t.faces[0].color=w}))}setColors(t){let{U:s,R:e,F:i,D:r,L:h,B:o}=t;this.setFaceColors(this.U,s),this.setFaceColors(this.R,e),this.setFaceColors(this.F,i),this.setFaceColors(this.D,r),this.setFaceColors(this.L,h),this.setFaceColors(this.B,o)}}var Yt,Zt;!function(t){t.Clockwise="",t.CounterClockwise="'",t.Double="2"}(Yt||(Yt={})),function(t){t.F="F",t.U="U",t.R="R",t.L="L",t.D="D",t.B="B",t.M="M",t.E="E",t.S="S",t.X="x",t.Y="y",t.Z="z"}(Zt||(Zt={}));const Qt=[Zt.F,Zt.U,Zt.R,Zt.L,Zt.D,Zt.B,Zt.M,Zt.E,Zt.S,Zt.X,Zt.Y,Zt.Z],Vt=[Zt.X,Zt.Y,Zt.Z],Kt=/([2-9]+)?([UuFfRrDdLlBbMESxyz])(w)?([2\'])?/g;function Jt(t){if(!t)return[];let s,e=[];for(;s=Kt.exec(t);){let t=s[1],i=s[2],r=s[3],h=s[4]||Yt.Clockwise,o=i===i.toLowerCase()&&-1===Vt.indexOf(i);o&&(i=i.toUpperCase());let a={unit:ss(i),turnType:es(h),slices:o?2:ts(t,r)};e.push(a)}return e}function ts(t,s){if(s&&!t)return 2;if(!s&&t)throw new Error("Invalid move: Cannot specify num slices if outer block move indicator 'w' is not present");return s||t?parseInt(t):1}function ss(t){if(Qt.indexOf(t)<0)throw new Error(`Invalid move (${t}): Possible turn faces are [U R F L D B M E S x y z]`);return t}function es(t){switch(t){case Yt.Clockwise:return ct.Clockwise;case Yt.CounterClockwise:return ct.CounterClockwise;case Yt.Double:return ct.Double;default:throw new Error(`Invalid move modifier (${t})`)}}var is;!function(t){t.U="U",t.R="R",t.F="F",t.D="D",t.L="L",t.B="B"}(is||(is={}));const rs=[is.U,is.R,is.F,is.D,is.L,is.B];var hs;!function(t){t.X="X",t.Y="Y",t.Z="Z"}(hs||(hs={}));const os={X:[is.U,is.B,is.D,is.F],Y:[is.L,is.B,is.R,is.F],Z:[is.L,is.U,is.R,is.D]},as={X:{[is.U]:0,[is.B]:2,[is.F]:0,[is.D]:0},Y:{[is.B]:-1,[is.F]:-1,[is.L]:-1,[is.R]:-1},Z:{[is.U]:-1,[is.D]:1,[is.L]:2,[is.R]:0}},ns={[is.U]:!1,[is.R]:!1,[is.F]:!1,[is.D]:!0,[is.L]:!0,[is.B]:!0};class cs extends tt{constructor(t){super(),this.size=t,this.gridSize=t*t,rs.forEach((t=>{this.addFace(ft(this.gridSize,t),t);const s=this.makeFaceTurnDefinitions(t);this.addTurn(s,t)})),[hs.X,hs.Y,hs.Z].forEach((t=>{for(let s=0;s<this.size;s++){let e=[];os[t].forEach(((i,r)=>{const h=os[t][(r+1)%os[t].length],o=this.faces.get(h),a=this.faces.get(i);for(let r=0;r<this.size;r++){const n=this.size*r+s,c=a[this.axisAlignedSticker(t,i,n)],l=o[this.axisAlignedSticker(t,h,n)];e.push([c,l])}})),this.addTurn(e,`${t}-${s}`)}}))}makeFaceTurnDefinitions(t){const s=this.faces.get(t);return s.map(((t,e)=>[t,s[this.clockwiseSticker(e)]]))}clockwiseSticker(t){return(t+1)*this.size%(this.gridSize+1)-1}counterClockwiseSticker(t){return this.oppositeSticker(this.clockwiseSticker(t))}oppositeSticker(t){return this.gridSize-(t+1)}axisAlignedSticker(t,s,e){switch(as[t][s]){case 0:return e;case 1:return this.clockwiseSticker(e);case 2:return this.oppositeSticker(e);case-1:return this.counterClockwiseSticker(e);default:throw`Invalid axis face orientation value ${as[t][s]}`}}turnFace(t,s,e,i,r){Math.abs(r-i)>=this.size-1?console.error(`Invalid number of layers to turn, skipping turn.; face=${t}, layers=${Math.abs(r-i)+1}`):(this.doTurn(t,e),function(t,s){if(t===s)return[t];const e=t<s?1:-1;let i=[];for(let r=t;r!=s;r+=e)i.push(r);return i.push(s),i}(i,r).forEach((i=>{this.doTurn(`${s}-${i}`,ns[t]?!e:e)})))}U(t=!1,s=1){this.turnFace(is.U,hs.Y,t,this.size-1,this.size-s)}R(t=!1,s=1){this.turnFace(is.R,hs.X,t,this.size-1,this.size-s)}F(t=!1,s=1){this.turnFace(is.F,hs.Z,t,0,s-1)}D(t=!1,s=1){this.turnFace(is.D,hs.Y,t,0,s-1)}L(t=!1,s=1){this.turnFace(is.L,hs.X,t,0,s-1)}B(t=!1,s=1){this.turnFace(is.B,hs.Z,t,this.size-1,this.size-s)}M(t=!1){for(let s=1;s<this.size-1;s++)this.doTurn(`${hs.X}-${s}`,!t)}S(t=!1){for(let s=1;s<this.size-1;s++)this.doTurn(`${hs.Z}-${s}`,t)}E(t=!1){for(let s=1;s<this.size-1;s++)this.doTurn(`${hs.Y}-${s}`,!t)}X(t=!1){this.doTurn("R",t),this.doTurn("L",!t);for(let s=0;s<this.size;s++)this.doTurn(`${hs.X}-${s}`,t)}Y(t=!1){this.doTurn("U",t),this.doTurn("D",!t);for(let s=0;s<this.size;s++)this.doTurn(`${hs.Y}-${s}`,t)}Z(t=!1){this.doTurn("F",t),this.doTurn("B",!t);for(let s=0;s<this.size;s++)this.doTurn(`${hs.Z}-${s}`,t)}reset(){this.faces.forEach(((t,s)=>{t.forEach((t=>{this.stickers.set(t,s)}))}))}alg(t){t&&this.doTurns(Jt(t))}case(t){if(!t)return;let s=Jt(t).reverse().map((t=>{switch(t.turnType){case ct.Clockwise:t.turnType=ct.CounterClockwise;break;case ct.CounterClockwise:t.turnType=ct.Clockwise;break;case ct.Double:}return t}));this.doTurns(s)}doTurns(t){t.forEach((t=>{let s;switch(t.unit){case Zt.U:s=this.U.bind(this);break;case Zt.R:s=this.R.bind(this);break;case Zt.F:s=this.F.bind(this);break;case Zt.D:s=this.D.bind(this);break;case Zt.L:s=this.L.bind(this);break;case Zt.B:s=this.B.bind(this);break;case Zt.M:s=this.M.bind(this);break;case Zt.E:s=this.E.bind(this);break;case Zt.S:s=this.S.bind(this);break;case Zt.X:s=this.X.bind(this);break;case Zt.Y:s=this.Y.bind(this);break;case Zt.Z:s=this.Z.bind(this);break;default:console.warn("Unsupported cube move",t)}const e=t.turnType===ct.CounterClockwise;s(e,t.slices),t.turnType===ct.Double&&s(e,t.slices)}))}}const ls=Math.acos(1/3),us=120*Math.PI/180,ds=Math.sqrt(24);class fs{constructor(t,s=1.75){this.size=t;const e=s/ds,o=new St(s,t,i),a=new St(s,t,n),c=new St(s,t,h),l=new St(s,t,r);this.L=c,this.R=a,this.U=o,this.B=l,o.rotate(us,[0,0,1]),o.rotate(ls,[1,0,0]),o.translate([0,0,e]),a.rotate(ls,[1,0,0]),a.translate([0,0,e]),c.rotate(-us,[0,0,1]),c.rotate(ls,[1,0,0]),c.translate([0,0,e]),l.rotate(Math.PI,[0,1,0]),l.translate([0,0,e]),this.faces=[o,c,a,l],this.group=new T(this.faces),this.group.rotate(-Math.PI/3,[1,0,0]),this.group.rotate(Math.PI/2.5,[0,0,1])}setColors(t){let{left:s,right:e,top:i,back:r}=t;this.setFaceColors(this.L,s),this.setFaceColors(this.R,e),this.setFaceColors(this.U,i),this.setFaceColors(this.B,r)}setFaceColors(t,s){t.faces.forEach(((t,e)=>{s&&s[e]?t.color=s[e]:t.color=w}))}}function ps(t){const s=new rt;return t.case?s.case(t.case):t.alg&&s.alg(t.alg),s}const ws={size:3,scheme:{U:i,R:r,F:h,D:o,L:a,B:n}},bs={size:2,scheme:{U:o,F:r,R:h,dr:p,dl:d,L:n,d:l,br:f,BR:i,BL:c,bl:u,b:a}},gs={size:3,scheme:{left:h,right:n,top:i,back:r}},Cs={scheme:{top:i,front:h,right:r,back:n,left:a,bottom:o}},ks={};function Fs(t){return t===g.SQUARE1||t===g.SQUARE1_NET}class Es{constructor(t,s,e={}){this.type=s,this.camera=new M,this.scene=new C,this.renderer=t,e=Object.assign(Object.assign({},function(t){switch(t){case g.CUBE:case g.CUBE_NET:case g.CUBE_TOP:return ws;case g.MEGAMINX:case g.MEGAMINX_NET:return bs;case g.PYRAMINX:case g.PYRAMINX_NET:return gs;case g.SKEWB:case g.SKEWB_NET:return Cs;case g.SQUARE1:case g.SQUARE1_NET:return ks;default:throw new Error(`Could not get default options for puzzle ${t}`)}}(s)),e),[this.puzzleGeometry,this.simulator]=function(t,s){switch(t){case g.CUBE:return function(t={}){return[new Xt(t.size),new cs(t.size)]}(s);case g.CUBE_NET:return function(t={}){return[new Ht(t.size),new cs(t.size)]}(s);case g.CUBE_TOP:return function(t={}){return[new N(t.size),new cs(t.size)]}(s);case g.MEGAMINX:return function(t={}){return[new jt(t.size),new Gt]}(s);case g.MEGAMINX_NET:return function(t={}){return[new zt(t.size),new Gt]}(s);case g.PYRAMINX:return function(t={}){return[new fs(t.size),new mt]}(s);case g.PYRAMINX_NET:return function(t={}){return[new Lt(t.size),new mt]}(s);case g.SKEWB:return[new Ft,new pt];case g.SKEWB_NET:return[new nt,new pt];case g.SQUARE1:return function(t={}){const s=ps(t);return[new ht(s.topLayer,s.bottomLayer,s.middleRotated),s]}(s);case g.SQUARE1_NET:return function(t={}){const s=ps(t);return[new J(s.topLayer,s.bottomLayer,s.middleRotated),s]}(s)}}(s,e),this.scene.add(this.puzzleGeometry.group),e.stickerColors&&!Fs(s)?this.applyManualColors(e):this.applySimulatorColors(e),this.render()}applyManualColors(t){this.puzzleGeometry.setColors(t.stickerColors)}applySimulatorColors(t){t.mask&&this.applyMask(t),(t.alg||t.case)&&this.applyAlgorithm(t);const s=(e=this.simulator.getValues(),i=t.scheme,Object.keys(e).reduce(((t,s)=>(t[s]=e[s].map((t=>i[t]||b)),t)),{}));var e,i;this.puzzleGeometry.setColors(s)}applyAlgorithm(t){Fs(this.type)||(t.case?this.simulator.case(t.case):t.alg&&this.simulator.alg(t.alg))}applyMask(t){Object.keys(t.mask).forEach((s=>{t.mask[s].forEach((t=>this.simulator.setValue(s,t,"mask")))}))}render(){this.renderer.render(this.scene,this.camera)}}function ys(t,s,e,i){const r=function(t){return t.reduce(((t,s)=>`${t?t+" ":""}${s[0]}, ${s[1]}`),"")}(s),h=e?e.value:"black",o=e&&e.stroke||"#000000";t.setAttributeNS(null,"points",r),t.setAttributeNS(null,"fill",h),i&&(t.setAttributeNS(null,"stroke",o),t.setAttributeNS(null,"stroke-width",i)),t.setAttributeNS(null,"stroke-linejoin","round")}class Ms{constructor(t,s,e,i,r,h){this.strokeWidth="0.035",this.polygons=[],this.uidToPolygon={},this.domElement=document.createElement("div"),this.domElement.className="svg-renderer",this.svgElement=function(t,s,e,i,r,h){const o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",s.toString()),o.setAttributeNS(null,"viewBox",`${e} ${i} ${r} ${h}`),o.setAttributeNS(null,"id","sr-visualizer"),o}(t,s,e,i,r,h),this.domElement.appendChild(this.svgElement)}render(t,s){this.polygons=[],t.objects.forEach((t=>{this.renderObject3D(t,s,[])})),this.renderPolygons()}renderPolygons(){this.polygons.sort(((t,s)=>t.centroid[2]-s.centroid[2])),this.polygons.forEach((t=>this.svgElement.appendChild(t.polygon)))}addPolygon(t,s,e,i){this.uidToPolygon[s.uid]?ys(this.uidToPolygon[s.uid],t,s.color||e.color,this.strokeWidth):this.uidToPolygon[s.uid]=function(t,s,e){const i=document.createElementNS("http://www.w3.org/2000/svg","polygon");return ys(i,t,s,e),i}(t,s.color||e.color,this.strokeWidth),this.polygons.push({polygon:this.uidToPolygon[s.uid],centroid:this.applyTransformations(s.centroid,[e.matrix,...i])})}renderObject3D(t,s,e){if(t instanceof x)this.renderGeometry(t,s,e);else if(t instanceof T){let i=t;this.sortObjects(i.objects,s,[i.matrix,...e]),i.objects.forEach((t=>{this.renderObject3D(t,s,[i.matrix,...e])}))}}renderGeometry(t,s,e){t.faces.forEach((i=>{let r=[];i.indices.map((s=>t.vertices[s])).forEach((i=>{let h=[t.matrix,...e,s.matrix],o=this.applyTransformations(i,h),a=(c=o,l=[1,-1,1],(n=o)[0]=c[0]*l[0],n[1]=c[1]*l[1],n[2]=c[2]*l[2],n);var n,c,l;r.push(a)})),this.addPolygon(r,i,t,e)}))}sortFaces(t,s,e){t.sort(((t,i)=>{let r=[s.matrix,...e],h=[s.matrix,...e],o=this.applyTransformations(t.centroid,r),a=this.applyTransformations(i.centroid,h);return o[2]-a[2]}))}sortObjects(t,s,e){t.sort(((t,s)=>{let i=[t.matrix,...e],r=[s.matrix,...e],h=this.applyTransformations(t.centroid,i),o=this.applyTransformations(s.centroid,r);return h[2]-o[2]}))}applyTransformations(t,s){return s.reduce(((t,s)=>{return e=t,r=s,h=(i=t)[0],o=i[1],a=i[2],n=(n=r[3]*h+r[7]*o+r[11]*a+r[15])||1,e[0]=(r[0]*h+r[4]*o+r[8]*a+r[12])/n,e[1]=(r[1]*h+r[5]*o+r[9]*a+r[13])/n,e[2]=(r[2]*h+r[6]*o+r[10]*a+r[14])/n,e;var e,i,r,h,o,a,n}),S(t))}}const ms={width:500,height:500,minx:-.9,miny:-.9,svgWidth:1.8,svgHeight:1.8,strokeWidth:.02};function Ss(t,s,e={}){if(e=Object.assign(Object.assign({},ms),e),"string"==typeof t&&null===(t=document.querySelector(t)))throw new Error(`Could not find visuzlier element by query selector: ${t}`);const i=new Ms(e.width,e.height,e.minx,e.miny,e.svgWidth,e.svgHeight);return i.strokeWidth=""+e.strokeWidth,t.appendChild(i.domElement),new Es(i,s,e.puzzle)}const Rs={CUBE_3:{LAST_LAYER:{F:[3,4,5,6,7,8],B:[3,4,5,6,7,8],R:[3,4,5,6,7,8],L:[3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8]},F2L:{F:[0,1,2],B:[0,1,2],R:[0,1,2],L:[0,1,2],U:[0,1,2,3,4,5,6,7,8]},FIRST_LAYER:{F:[0,1,2,3,4,5],B:[0,1,2,3,4,5],R:[0,1,2,3,4,5],L:[0,1,2,3,4,5],U:[0,1,2,3,4,5,6,7,8]},OLL:{R:[0,1,2,3,4,5,6,7,8],F:[0,1,2,3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8],L:[0,1,2,3,4,5,6,7,8],B:[0,1,2,3,4,5,6,7,8]},CORNERS_LAST_LAYER:{U:[1,3,5,7],F:[1,3,4,5,6,7,8],B:[1,3,4,5,6,7,8],R:[1,3,4,5,6,7,8],L:[1,3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8]},EDGES_LAST_LAYER:{U:[0,2,6,8],F:[0,2,3,4,5,6,7,8],B:[0,2,3,4,5,6,7,8],R:[0,2,3,4,5,6,7,8],L:[0,2,3,4,5,6,7,8],D:[0,1,2,3,4,5,6,7,8]}}}}},s={};function e(i){if(s[i])return s[i].exports;var r=s[i]={exports:{}};return t[i](r,r.exports,e),r.exports}return e.d=(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(162)})()}));
//# sourceMappingURL=puzzleGen.min.js.map